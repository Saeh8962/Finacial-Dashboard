{"ast":null,"code":"var _classCallCheck = require(\"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _assertThisInitialized = require(\"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar _require = require(\"events\"),\n    EventEmitter = _require.EventEmitter;\n\nvar _declarations = Symbol(\"declarations\");\n\nvar _values = Symbol(\"values\");\n\nvar _chain = Symbol(\"chain\");\n\nvar _owner = Symbol(\"owner\");\n\nvar isClass = function isClass(cls) {\n  return cls && typeof cls === \"function\" && cls.prototype.constructor === cls && cls !== Object;\n};\n\nvar _superClass = function _superClass(cls) {\n  return isClass(cls) && cls.prototype.__proto__ && cls.prototype.__proto__.constructor;\n};\n\nvar inheritedProxy = function inheritedProxy(parent) {\n  return new Proxy({}, {\n    has: function has(target, prop) {\n      return prop in target || parent && prop in parent;\n    },\n    get: function get(target, prop) {\n      if (prop in target) return target[prop];\n      return parent && parent[prop];\n    },\n    set: function set(target, prop, value) {\n      if (prop in target) throw new Error(\"Option \\\"\".concat(prop, \"\\\" already defined\"));\n      target[prop] = value;\n      return true;\n    }\n  });\n};\n\nvar findProxyForInstance = function findProxyForInstance(ref, instance) {\n  return findProxyForClass(ref.__proto__.constructor[_declarations], instance.__proto__.constructor);\n};\n\nvar findProxyForClass = function findProxyForClass(map, cls) {\n  if (!isClass(cls)) {\n    throw new Error(\"Cannot get options declaration for a non-constructor\");\n  }\n\n  if (map.has(cls)) return map.get(cls);\n\n  var superClass = _superClass(cls);\n\n  var parent = isClass(superClass) ? findProxyForClass(map, superClass) : null;\n  var declaration = inheritedProxy(parent);\n  map.set(cls, declaration);\n  return declaration;\n};\n\nvar DefaultDefinition = {};\n/**\n * Scramjet options for streams\n */\n\nmodule.exports = /*#__PURE__*/function (_EventEmitter) {\n  \"use strict\";\n\n  _inherits(ScramjetOptions, _EventEmitter);\n\n  var _super = _createSuper(ScramjetOptions);\n\n  /**\n   *\n   * @param {PromiseTransformStream} owner\n   * @param {ScramjetOptions} chain\n   */\n  function ScramjetOptions(owner, chain, initial) {\n    var _this;\n\n    _classCallCheck(this, ScramjetOptions);\n\n    _this = _super.call(this);\n    _this[_owner] = owner;\n    _this[_chain] = chain;\n    _this[_declarations] = findProxyForInstance(_assertThisInitialized(_this), owner);\n    _this[_values] = {};\n    Object.assign(_this[_values], initial);\n    return _this;\n  }\n\n  _createClass(ScramjetOptions, [{\n    key: \"proxy\",\n    get: function get() {\n      var value = new Proxy(this, {\n        has: function has(target, key) {\n          if (!(key in target[_declarations])) return false;\n          return key in target[_values] || target[_declarations][key].value;\n        },\n        ownKeys: function ownKeys(target) {\n          return Object.keys(target[_values]);\n        },\n        getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, key) {\n          if (key in target[_values]) {\n            return {\n              value: this.get(target, key),\n              enumerable: true,\n              configurable: true,\n              writable: true\n            };\n          }\n        },\n        get: function get(target, key) {\n          if (key in target[_declarations]) {\n            if (key in target[_values]) return target[_values][key];\n            if (target[_chain] && target[_declarations][key].chained && Object.prototype.hasOwnProperty.call(target[_chain], key)) return target[_chain][key];\n            return target[_declarations][key].value;\n          }\n\n          throw new Error(\"Attempting to access undeclared option: \".concat(key));\n        },\n        set: function set(target, key, value) {\n          if (key in target[_declarations]) {\n            target[_values][key] = value;\n            return;\n          }\n\n          throw new Error(\"Attempting to set undeclared option: \".concat(key));\n        }\n      });\n      Object.defineProperty(this, \"proxy\", {\n        value: value\n      });\n      return value;\n    }\n    /**\n     * Declares a usable option.\n     *\n     * @param {Function<PromiseTransformStream>} cls\n     * @param {string} name\n     * @param {object} definition\n     */\n\n  }], [{\n    key: \"declare\",\n    value: function declare(cls, name) {\n      var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DefaultDefinition,\n          _ref$chained = _ref.chained,\n          chained = _ref$chained === void 0 ? false : _ref$chained,\n          value = _ref.value;\n\n      this[_declarations] = this[_declarations] || new Map();\n      var optionsList = findProxyForClass(this[_declarations], cls);\n      optionsList[name] = {\n        chained: chained,\n        value: value\n      };\n    }\n  }]);\n\n  return ScramjetOptions;\n}(EventEmitter);","map":{"version":3,"sources":["/Users/samehrlich/Desktop/final-app/client/node_modules/scramjet-core/lib/util/options.js"],"names":["require","EventEmitter","_declarations","Symbol","_values","_chain","_owner","isClass","cls","prototype","constructor","Object","_superClass","__proto__","inheritedProxy","parent","Proxy","has","target","prop","get","set","value","Error","findProxyForInstance","ref","instance","findProxyForClass","map","superClass","declaration","DefaultDefinition","module","exports","owner","chain","initial","assign","key","ownKeys","keys","getOwnPropertyDescriptor","enumerable","configurable","writable","chained","hasOwnProperty","call","defineProperty","name","Map","optionsList"],"mappings":"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","sourcesContent":["const { EventEmitter } = require(\"events\");\nconst _declarations = Symbol(\"declarations\");\nconst _values = Symbol(\"values\");\nconst _chain = Symbol(\"chain\");\nconst _owner = Symbol(\"owner\");\n\nconst isClass = cls => cls && typeof cls === \"function\" && cls.prototype.constructor === cls && cls !== Object;\nconst _superClass = (cls) => {\n    return isClass(cls) && cls.prototype.__proto__ && cls.prototype.__proto__.constructor;\n};\n\nconst inheritedProxy = (parent) => {\n    return new Proxy({}, {\n        has(target, prop) {\n            return prop in target || parent && prop in parent;\n        },\n        get(target, prop) {\n            if (prop in target)\n                return target[prop];\n\n            return parent && parent[prop];\n        },\n        set(target, prop, value) {\n            if (prop in target)\n                throw new Error(`Option \"${prop}\" already defined`);\n\n            target[prop] = value;\n            return true;\n        }\n    });\n};\n\nconst findProxyForInstance = (ref, instance) => {\n    return findProxyForClass(ref.__proto__.constructor[_declarations], instance.__proto__.constructor);\n};\n\nconst findProxyForClass = (map, cls) => {\n    if (!isClass(cls)) {\n        throw new Error(\"Cannot get options declaration for a non-constructor\");\n    }\n\n    if (map.has(cls))\n        return map.get(cls);\n\n    const superClass = _superClass(cls);\n    const parent = isClass(superClass) ? findProxyForClass(map, superClass) : null;\n\n    const declaration = inheritedProxy(parent);\n    map.set(cls, declaration);\n\n    return declaration;\n};\n\nconst DefaultDefinition = {};\n\n/**\n * Scramjet options for streams\n */\nmodule.exports = class ScramjetOptions extends EventEmitter {\n    /**\n     *\n     * @param {PromiseTransformStream} owner\n     * @param {ScramjetOptions} chain\n     */\n    constructor(owner, chain, initial) {\n        super();\n        this[_owner] = owner;\n        this[_chain] = chain;\n        this[_declarations] = findProxyForInstance(this, owner);\n        this[_values] = {};\n        Object.assign(this[_values], initial);\n    }\n\n    get proxy() {\n        const value = new Proxy(this, {\n            has(target, key) {\n                if (!(key in target[_declarations]))\n                    return false;\n                return key in target[_values] || target[_declarations][key].value;\n            },\n            ownKeys(target) {\n                return Object.keys(target[_values]);\n            },\n            getOwnPropertyDescriptor(target, key) {\n                if (key in target[_values]) {\n                    return {\n                        value: this.get(target, key),\n                        enumerable: true,\n                        configurable: true,\n                        writable: true\n                    };\n                }\n            },\n            get(target, key) {\n                if (key in target[_declarations]) {\n                    if (key in target[_values])\n                        return target[_values][key];\n\n                    if (target[_chain] && target[_declarations][key].chained && Object.prototype.hasOwnProperty.call(target[_chain], key))\n                        return target[_chain][key];\n\n                    return target[_declarations][key].value;\n                }\n\n                throw new Error(`Attempting to access undeclared option: ${key}`);\n            },\n            set(target, key, value) {\n                if (key in target[_declarations]) {\n                    target[_values][key] = value;\n                    return;\n                }\n\n                throw new Error(`Attempting to set undeclared option: ${key}`);\n            }\n        });\n\n        Object.defineProperty(this, \"proxy\", { value });\n        return value;\n    }\n\n    /**\n     * Declares a usable option.\n     *\n     * @param {Function<PromiseTransformStream>} cls\n     * @param {string} name\n     * @param {object} definition\n     */\n    static declare(cls, name, { chained = false, value } = DefaultDefinition) {\n        this[_declarations] = this[_declarations] || new Map();\n        const optionsList = findProxyForClass(this[_declarations], cls);\n\n        optionsList[name] = { chained, value };\n    }\n};\n"]},"metadata":{},"sourceType":"script"}