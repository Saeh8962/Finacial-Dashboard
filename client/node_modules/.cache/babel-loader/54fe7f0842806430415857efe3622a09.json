{"ast":null,"code":"import _objectSpread from \"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _assertThisInitialized from \"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _classCallCheck from \"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/samehrlich/Desktop/final-app/client/src/components/WatchList.jsx\";\nimport React, { Component, ChildComponent } from \"react\";\nimport { ListGroup } from \"react-bootstrap/esm\";\nimport { Button, DropdownMenu, Dropdown } from \"reactstrap/es\"; // import {Tooltip,OverlayTrigger} from \"react-bootstrap\"\n\nimport { withRouter } from \"react-router-dom\";\nimport { Grid, GridCellProps, GridColumn } from \"@progress/kendo-react-grid\";\nimport * as ReactDOM from \"react-dom\";\nimport { Tooltip } from \"@progress/kendo-react-tooltip\";\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport { MyCommandCell } from \"./mycommand.jsx\";\nimport \"hammerjs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar request = require('request');\n\nvar viewChartOver = /*#__PURE__*/function (_React$Component) {\n  _inherits(viewChartOver, _React$Component);\n\n  var _super = _createSuper(viewChartOver);\n\n  function viewChartOver() {\n    _classCallCheck(this, viewChartOver);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(viewChartOver, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/_jsxDEV(\"td\", {\n        title: \"View chart\",\n        children: \"view the char\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return viewChartOver;\n}(React.Component);\n\nexport default withRouter( /*#__PURE__*/function (_React$Component2) {\n  _inherits(WatchList, _React$Component2);\n\n  var _super2 = _createSuper(WatchList);\n\n  function WatchList(_props) {\n    var _this;\n\n    _classCallCheck(this, WatchList);\n\n    _this = _super2.call(this, _props);\n\n    _this.CommandCell = function (props) {\n      return /*#__PURE__*/_jsxDEV(MyCommandCell, _objectSpread(_objectSpread({}, props), {}, {\n        remove: _this.removeStock\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, _assertThisInitialized(_this));\n    };\n\n    _this.getEodData = _this.getEodData.bind(_assertThisInitialized(_this));\n    _this.removeStock = _this.removeStock.bind(_assertThisInitialized(_this));\n    _this.renderStockChart = _this.renderStockChart.bind(_assertThisInitialized(_this));\n    _this.removeHelper = _this.removeHelper.bind(_assertThisInitialized(_this)); // this.getButton=this.getButton.bind(this);\n\n    _this.state = {\n      email: _this.props.email,\n      stocks: _this.props.stocks,\n      connectionError: false,\n      dropdownOpen: false,\n      value: \"Your Watchlist\",\n      stockHasBeenRemoved: false,\n      chartStock: \"\",\n      eodData: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(WatchList, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this2 = this;\n\n      if (prevState.stockHasBeenRemoved !== this.state.stockHasBeenRemoved) {\n        console.log('User has removed a stock.');\n\n        if (this.props.history.push !== undefined) {\n          this.setState({\n            stockHasBeenRemoved: false\n          }, function () {\n            return _this2.props.history.push(\"/profile\", [[{\n              email: _this2.state.email,\n              removeStocks: true\n            }, _this2.state.stocks]]);\n          });\n        } else {\n          this.setState({\n            stocks: this.state.stocks\n          });\n        }\n      }\n\n      if (this.props.stocks.length != prevProps.stocks.length) {\n        console.log('Update stocks');\n        this.setState({\n          stocks: this.props.stocks\n        });\n      }\n\n      if (prevState.chartStock !== this.state.chartStock && this.state.chartStock !== \"\") {\n        var stock_chart = this.state.chartStock;\n        console.log(\"render chart for \", stock_chart);\n        this.setState({\n          chartStock: \"\"\n        }, function () {\n          return _this2.props.history.push(\"/profile\", [[{\n            email: _this2.state.email,\n            chartStock: stock_chart\n          }, _this2.state.stocks]]);\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // var data = getEodData(\"AAPL\");\n      // console.log(data);\n      this.getEodData(\"AAPL\"); // this.setState({eodData:data})\n    }\n  }, {\n    key: \"getEodData\",\n    value: function getEodData(symbols) {\n      var getsymbols = \"\";\n      var x = 0;\n      var fullUrl = \"http://api.marketstack.com/v1/eod/latest?access_key=5dd6fd84e5ba4e974843da4e6e23db23&symbols=\" + symbol;\n      symbols.forEach(function (symbol) {\n        getsymbols = getsymbols + symbol;\n\n        if (x != symbols.length - 1) {\n          getsymbols = getsymbols + \",\";\n        }\n\n        x = x + 1;\n      });\n      console.log(getsymbols); // request(fullUrl, { json: true }, (err, res, body) => {\n      //   if (err) { return console.log(err); }\n      //   var eod={\n      //     open: body.data[0].open,\n      //     high: body.data[0].high,\n      //     low: body.data[0].low,\n      //     close: body.data[0].close,\n      //     volume: body.data[0].volume,\n      //     adj_high: body.data[0].adj_high,\n      //     adj_low: body.data[0].adj_low,\n      //     adj_close: body.data[0].adj_close,\n      //     adj_open: body.data[0].adj_open,\n      //     adj_volume: body.data[0].adj_volume,\n      //     split_factor: body.data[0].split_factor,\n      //     symbol: body.data[0].symbol,\n      //     exchange: body.data[0].exchange,\n      //     date: body.data[0].date\n      //   }\n      //   this.setState({eodData:eod});\n      //   console.log(body.data[0].open)\n      //   return (eod);\n      // })\n    } //     getButton(){\n    //         return(\n    // <button className=\"k-button k-grid-remove-command\"onClick={(e) =>this.remove(e)}>Remove </button>\n    //         )\n    //     }\n    // remove(e,stocks){\n    //     console.log(stocks);\n    // }\n    // componentWillMount(){\n    //     this.connection = new WebSocket('wss://ws.finnhub.io?token=c34391qad3i8edlcgrgg');\n    //     this.getUserStocks();\n    // }\n    // componentWillUnmount(){\n    //     this.state.stocks.forEach(symbol=>{\n    //         this.connection.send(JSON.stringify({'type':'unsubscribe', 'symbol': symbol.Symbol}));\n    //     })\n    //     this.connection.close();\n    //     // Perform any necessary cleanup in this method, such as invalidating timers, canceling network requests, \n    //     // or cleaning up any subscriptions that were created in componentDidMount().\n    // }\n    // componentDidUpdate(prevProps, prevState) {\n    //     if (prevProps.stocks !== this.props.stocks) {\n    //       console.log('stocks state has changed.')\n    //     //   this.props.history.push(\"/profile\",[[{email:this.state.email}],this.state.stocks]);\n    //         this.setState({stocks:this.props.stocks});\n    //     }\n    //   }\n    // toggle(event) {\n    //     this.setState({\n    //       dropdownOpen: !this.state.dropdownOpen,\n    //       value: event.currentTarget.textContent\n    //     });\n    //   }\n    // saveNewStockTrade= (event) => {\n    //     let result = JSON.parse(event.data)\n    //     console.log(result)\n    //     let user_watchlist = this.state.stocks\n    //     console.log(\"InsidesaveNewStockTrade: \", user_watchlist)\n    //     if(result.type===\"trade\"){\n    //         user_watchlist.forEach(symbol => {\n    //             var tradePrice= result.data.filter((i,n)=>i.s===symbol.Symbol);\n    //             if(tradePrice.length !==0){\n    //                 symbol.currentPrice = tradePrice[tradePrice.length-1].p; \n    //                 console.log(\"Found Updated price for \",symbol.Symbol)\n    //                 // socket.send(JSON.stringify({'type':'unsubscribe', 'symbol': symbol.name}))\n    //             }\n    //         })\n    //     }\n    //     this.setState({stocks:user_watchlist});\n    // }\n    // componentDidMount(){\n    //     this.connection.onopen = ()=> { \n    //         if (this.state.stocks!==\"No stocks added\"){\n    //             this.state.stocks.forEach(symbol=>{\n    //                 this.connection.send(JSON.stringify({'type':'subscribe', 'symbol': symbol.Symbol}));\n    //                 console.log(\"Inside OnOpen: Subscribed To: \", symbol.Symbol)\n    //             })\n    //         }\n    //         else{\n    //             console.log(\"no stocks added to subscribe to\");\n    //         }\n    //     }\n    //     this.connection.onmessage= this.saveNewStockTrade;\n    //     this.connection.onclose = () => { this.setState({connectionError: true}) }\n    // }\n    // updateDropdown(){\n    //     var Message = \"Your WatchList\";\n    //     if(this.state.stocks===\"No stocks added\"){\n    //         Message =\"Empty Watchlist\"; \n    //     }\n    //     var MessageArrowDir;\n    //     if(this.state.dropdownOpen){\n    //       MessageArrowDir = \"\\u25BC\";\n    //     }\n    //     else{\n    //       MessageArrowDir = \"\\u25B2\";\n    //     }\n    //     var header =\n    //         <> <div className = \"dropDiv\">\n    //             <Button className = \"FakeDropDown\" onClick = {(e)=>{this.doNothing(e)}}><span style={{marginLeft:\"55px\"}}>{Message}</span></Button>\n    //             <Button className = \"realDropDown \"onClick = {this.toggle} aria-expanded = {this.state.dropdownOpen}\n    //                     data-toggle = \"dropdown\" aria-haspopup=\"true\"><span style={{fontSize:\"18px\"}}>{MessageArrowDir}</span></Button>\n    //         </div></>\n    //     if(this.state.stocks!==\"No stocks added\"){\n    //     var display = \n    //     <Dropdown style = {{marginBottom:\"20px\"}} isOpen={this.state.dropdownOpen}>\n    //         {header}\n    //         <DropdownMenu className = \"DDM\">\n    //           <div className = \"ArtistsDisplayWrapper\">\n    //             {this.state.stocks.map((stocks,index) =>\n    //         <div className = \"ArtistLine\" style = {{marginBottom:\"55px\"}}>\n    //             <button  onClick = {(e)=>{this.doNothing(e)}} className = \"artistButton\">{stocks.Symbol}</button>\n    //             <button id = {stocks.symbol} onClick = {(e)=>{this.doNothing(e)}} className = \"playArtistButton\">${stocks.currentPrice}</button>\n    //             <button onClick = {(e)=>{this.removeStock(e,stocks.Symbol)}} className = \"removeButton\">X</button> \n    //         </div>\n    //             )}\n    //           </div>\n    //         </DropdownMenu>\n    //     </Dropdown>\n    //     this.setState({dropdownDisplay:display});\n    //             }\n    //             else{\n    //                 this.setState({dropdownDisplay:header});\n    //             }\n    // }\n\n  }, {\n    key: \"removeStock\",\n    value: function removeStock(htmlEvent, stock) {\n      var _this3 = this;\n\n      //unsubsribe from listening to thsi stock\n      console.log(\"Unsubscribing from: \", stock.Symbol); // this.connection.send(JSON.stringify({'type':'unsubscribe', 'symbol': stock}))\n      //first stop the htmlEvents default status\n\n      htmlEvent.preventDefault();\n      var user = {\n        email: this.props.email,\n        stock_symbol: stock.Symbol\n      };\n      console.log(user);\n      var url = '/api/removeUserStock';\n      var req = new Request(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(user)\n      });\n      fetch(req).then(function (res) {\n        console.log(res);\n\n        if (res.status === 500) {\n          res.json().then(function (json) {\n            var message = json.message,\n                stackTrace = json.stackTrace;\n          }).catch(function (error) {\n            return Promise.reject(error);\n          });\n        } else {\n          return res.json();\n        }\n      }).then(function (result) {\n        console.log(\"1st remove stock rerender\");\n\n        _this3.setState({\n          remove_status: result\n        }, function () {\n          return _this3.removeHelper();\n        });\n      });\n    }\n  }, {\n    key: \"removeHelper\",\n    value: function removeHelper() {\n      console.log(\"p/179\", this.state.remove_status); //removed but still showing on watch list\n\n      if (this.state.remove_status.response === \"Stock not on watch list\") {\n        alert(\"Stock Queued For Deletion, Please Login In Again\");\n      } //stock has been removed from watchlist\n      else if (this.state.remove_status.Response === \"Sucessfully removed stock\") {\n          console.log(\"2nd remove stock rerender\");\n          this.setState({\n            stockHasBeenRemoved: true\n          });\n        }\n    } // getUserStocks(){\n    //     var user={ \n    //         email: this.state.email,\n    //     }\n    //     var url = \"/api/getUserStocks\";\n    //     const req = new Request(url,{\n    //         method:\"POST\",\n    //         headers:{\"Content-Type\":\"application/json\"},\n    //         body:JSON.stringify(user),\n    //     });\n    //     fetch(req)\n    //     .then((res)=>{\n    //         return res.json();\n    //     }).catch((error)=>{\n    //         console.log(\"p/121\");\n    //         console.log(error);\n    //         return Promise.reject(error);\n    //         })\n    //     .then(stock_results => {\n    //         console.log(\"3rdt ADD/remove Stock Rerender\");\n    //         this.setState({stocks:stock_results},()=>this.updatePage)});\n    // }\n    // updatePage(){\n    //     console.log(\"In update page \",this.state.stocks);\n    //     this.props.history.push(\"/profile\",[[{email:this.state.email}],this.state.stocks])\n    // }\n    // UpdateStockOnPage(){\n    //     if(this.state.stock_symbol_status === 'User had already added this stock'){\n    //         alert(\"This stock is already on your watchlist\");\n    //     }\n    //     else{\n    //         console.log(\"2nd ADD Stock Rerender\");\n    //         this.setState({stock_symbol_status:\"\",Remove_Status:\"\"},()=>this.getUserStocks());\n    //     }\n    // }\n    // addUserStock(){\n    //     if(this.state.stock_symbol_status !== \"stock not found\"){\n    //         console.log(\"Subscribing to \",this.state.stock_to_watch)\n    //         this.connection.send(JSON.stringify({'type':'subscribe', 'symbol': this.state.stock_to_watch}))\n    //         var user={\n    //             email:this.props.email,\n    //             addStock: this.state.stock_to_watch\n    //         } \n    //         var url=\"/api/AddUserStocks\";\n    //         const req = new Request(url,{\n    //             method:\"POST\",\n    //             headers:{\"Content-Type\":\"application/json\"},\n    //             body:JSON.stringify(user),\n    //         });\n    //         fetch(req)\n    //         .then((res)=>{\n    //             return res.json();\n    //         }).catch((error)=>{\n    //             return Promise.reject(error);\n    //           })\n    //         .then(result => {\n    //             console.log(\"1st ADD Stock Rerender\");\n    //             this.setState({stock_symbol_status: result},()=>this.UpdateStockOnPage())});\n    //     }\n    //     else{\n    //         //put in this functionality \n    //         alert(\"stock not found\");\n    //     }\n    // }\n    // handleChange(event) {\n    //     this.setState({stock_to_watch: event.target.value});\n    //   }\n\n  }, {\n    key: \"renderStockChart\",\n    value: function renderStockChart(event) {\n      console.log(event.dataItem.Symbol);\n      this.setState({\n        chartStock: event.dataItem.Symbol\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // console.log(\"In render: \", this.state.stocks,this.props.stocks);\n      // // console.log(\"In render: \", this.state.dropdownDisplay);\n      // if (this.state == null){\n      //     this.props.history.push(\"/error\");\n      //     }\n      // var Message = \"Your WatchList\";\n      // if(this.state.stocks===\"No stocks added\"){\n      //     Message =\"Empty Watchlist\"; \n      // }\n      // var MessageArrowDir;\n      // if(this.state.dropdownOpen){\n      //   MessageArrowDir = \"\\u25BC\";\n      // }\n      // else{\n      //   MessageArrowDir = \"\\u25B2\";\n      // }\n      // var dropdownDisplay =\n      //     <> <div className = \"dropDiv\">\n      //         <Button className = \"FakeDropDown\" onClick = {(e)=>{this.doNothing(e)}}><span style={{marginLeft:\"55px\"}}>{Message}</span></Button>\n      //         <Button className = \"realDropDown \"onClick = {this.toggle} aria-expanded = {this.state.dropdownOpen}\n      //                 data-toggle = \"dropdown\" aria-haspopup=\"true\"><span style={{fontSize:\"18px\"}}>{MessageArrowDir}</span></Button>\n      //     </div></>\n      // var dropdown;\n      // if(this.state.stocks!==\"No stocks added\"){\n      // dropdown = \n      // <Dropdown style = {{marginBottom:\"20px\"}} isOpen={this.state.dropdownOpen}>\n      //     {dropdownDisplay}\n      //     <DropdownMenu className = \"DDM\">\n      //       <div className = \"ArtistsDisplayWrapper\">\n      //         {this.state.stocks.map((stocks,index) =>\n      //     <div className = \"ArtistLine\" style = {{marginBottom:\"55px\"}}>\n      //         <button  onClick = {(e)=>{this.doNothing(e)}} className = \"artistButton\">{stocks.Symbol}</button>\n      //         <button id = {stocks.symbol} onClick = {(e)=>{this.doNothing(e)}} className = \"playArtistButton\">${stocks.currentPrice}</button>\n      //         <button onClick = {(e)=>{this.removeStock(e,stocks.Symbol)}} className = \"removeButton\">X</button> \n      //     </div>\n      //         )}\n      //       </div>\n      //     </DropdownMenu>\n      // </Dropdown>\n      // }\n      // else{\n      //     dropdown = dropdownDisplay;\n      // }\n      // var trackButton = <Button onClick = {this.getStockInfo} className= \"Button\" id = \"TrackButton\" >Track </Button>;\n      // this.props.history.push(\"/error\",this.state)\n      // onClick={this.props.onClick}\n      var useData;\n      if (this.props.stocks !== \"No stocks added\") useData = this.props.stocks;else {\n        useData = [{\n          Symbol: \"Add stocks\",\n          currenPrice: \"Add stocks\"\n        }];\n      }\n      console.log(this.state.eodData);\n      return /*#__PURE__*/_jsxDEV(Tooltip, {\n        openDelay: 100,\n        position: \"right\",\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          data: useData // style={{ height: 700 }}\n          ,\n          onRowClick: this.renderStockChart,\n          title: \"WatchList\",\n          children: [/*#__PURE__*/_jsxDEV(GridColumn, {\n            title: \"Name\",\n            field: \"name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(GridColumn, {\n            title: \"Symbol\",\n            field: \"Symbol\",\n            style: {\n              width: 100\n            },\n            locked: false,\n            width: 100\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(GridColumn, {\n            title: \"Current Price\",\n            field: \"currentPrice\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(GridColumn, {\n            title: \"Change\",\n            field: \"day_change\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(GridColumn, {\n            title: \"% Change\",\n            field: \"change_pct\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(GridColumn, {\n            title: \"Volume\",\n            field: \"volume\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(GridColumn, {\n            title: \"Market Cap\",\n            field: \"market_cap\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(GridColumn, {\n            title: \"View Options\",\n            id: \"Symbol\",\n            cell: this.CommandCell,\n            width: \"200px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(GridColumn, {\n            title: \"Tracker\",\n            id: \"Symbol\",\n            cell: this.CommandCell,\n            width: \"200px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(GridColumn, {\n            title: \"Remove From WatchList\",\n            id: \"Symbol\",\n            cell: this.CommandCell,\n            width: \"200px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 5\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 11\n      }, this);\n    }\n  }]);\n\n  return WatchList;\n}(React.Component));","map":{"version":3,"sources":["/Users/samehrlich/Desktop/final-app/client/src/components/WatchList.jsx"],"names":["React","Component","ChildComponent","ListGroup","Button","DropdownMenu","Dropdown","withRouter","Grid","GridCellProps","GridColumn","ReactDOM","Tooltip","OverlayTrigger","MyCommandCell","request","require","viewChartOver","props","CommandCell","removeStock","getEodData","bind","renderStockChart","removeHelper","state","email","stocks","connectionError","dropdownOpen","value","stockHasBeenRemoved","chartStock","eodData","prevProps","prevState","console","log","history","push","undefined","setState","removeStocks","length","stock_chart","symbols","getsymbols","x","fullUrl","symbol","forEach","htmlEvent","stock","Symbol","preventDefault","user","stock_symbol","url","req","Request","method","headers","body","JSON","stringify","fetch","then","res","status","json","message","stackTrace","catch","error","Promise","reject","result","remove_status","response","alert","Response","event","dataItem","useData","currenPrice","width"],"mappings":"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","sourcesContent":["import React,{Component,ChildComponent} from \"react\";\nimport {ListGroup} from \"react-bootstrap/esm\";\nimport {Button,DropdownMenu,Dropdown,} from \"reactstrap/es\";\n// import {Tooltip,OverlayTrigger} from \"react-bootstrap\"\nimport {withRouter} from \"react-router-dom\";\nimport { Grid, GridCellProps, GridColumn } from \"@progress/kendo-react-grid\";\nimport * as ReactDOM from \"react-dom\";\nimport { Tooltip } from \"@progress/kendo-react-tooltip\";\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport { MyCommandCell } from \"./mycommand.jsx\";\nimport \"hammerjs\";\nconst request = require('request');\n\nclass viewChartOver extends React.Component {\n  render() {\n    return (\n      <td title={\"View chart\"}>\n        {\"view the char\"}\n      </td>\n    );\n  }\n}\nexport default withRouter( class WatchList extends React.Component {\n \n    constructor(props) {\n        super(props)\n            this.getEodData=this.getEodData.bind(this)\n            this.removeStock=this.removeStock.bind(this);\n            this.renderStockChart=this.renderStockChart.bind(this);\n            this.removeHelper=this.removeHelper.bind(this);\n            // this.getButton=this.getButton.bind(this);\n            this.state={\n                email : this.props.email,\n                stocks:this.props.stocks,\n                connectionError: false,\n                dropdownOpen: false,\n                value:\"Your Watchlist\",\n                stockHasBeenRemoved:false,\n                chartStock:\"\",\n                eodData:\"\"\n                \n            }\n            \n        \n        \n    }\n    CommandCell = (props) => (\n        <MyCommandCell\n          {...props}\n          \n          remove={this.removeStock}\n          \n        />\n      );\n      componentDidUpdate(prevProps, prevState) {\n        if (prevState.stockHasBeenRemoved !== this.state.stockHasBeenRemoved) {\n          console.log('User has removed a stock.')\n          if(this.props.history.push!== undefined) {\n            this.setState({stockHasBeenRemoved:false},()=>this.props.history.push(\"/profile\",[[{email:this.state.email,removeStocks:true},this.state.stocks]]));\n          }\n          else{\n              this.setState({stocks:this.state.stocks})\n          }\n        }\n          if (this.props.stocks.length != prevProps.stocks.length) {\n            console.log('Update stocks')\n            this.setState({stocks:this.props.stocks})\n         \n        }\n        if(prevState.chartStock!==this.state.chartStock && this.state.chartStock!==\"\"){\n          var stock_chart= this.state.chartStock;\n          console.log(\"render chart for \", stock_chart);\n          \n          this.setState({chartStock:\"\"},()=>this.props.history.push(\"/profile\",[[{email:this.state.email,chartStock:stock_chart},this.state.stocks]]))\n        }\n      }\n      \n      componentDidMount(){\n        // var data = getEodData(\"AAPL\");\n        // console.log(data);\n        this.getEodData(\"AAPL\")\n        // this.setState({eodData:data})\n        \n      }\n      getEodData(symbols){\n        \n        var getsymbols =\"\";\n        var x= 0;\n        var fullUrl= \"http://api.marketstack.com/v1/eod/latest?access_key=5dd6fd84e5ba4e974843da4e6e23db23&symbols=\"+symbol;\n        symbols.forEach(symbol=>{\n          getsymbols= getsymbols+symbol\n          if(x != symbols.length-1){\n            getsymbols = getsymbols+\",\";\n          }\n          x=x+1;\n        })\n        console.log(getsymbols);\n        // request(fullUrl, { json: true }, (err, res, body) => {\n        //   if (err) { return console.log(err); }\n        //   var eod={\n        //     open: body.data[0].open,\n        //     high: body.data[0].high,\n        //     low: body.data[0].low,\n        //     close: body.data[0].close,\n        //     volume: body.data[0].volume,\n        //     adj_high: body.data[0].adj_high,\n        //     adj_low: body.data[0].adj_low,\n        //     adj_close: body.data[0].adj_close,\n        //     adj_open: body.data[0].adj_open,\n        //     adj_volume: body.data[0].adj_volume,\n        //     split_factor: body.data[0].split_factor,\n        //     symbol: body.data[0].symbol,\n        //     exchange: body.data[0].exchange,\n        //     date: body.data[0].date\n\n        //   }\n        //   this.setState({eodData:eod});\n        //   console.log(body.data[0].open)\n        //   return (eod);\n         \n          \n        // })\n\n      }\n//     getButton(){\n//         return(\n// <button className=\"k-button k-grid-remove-command\"onClick={(e) =>this.remove(e)}>Remove </button>\n//         )\n//     }\n    // remove(e,stocks){\n    //     console.log(stocks);\n    // }\n    // componentWillMount(){\n    //     this.connection = new WebSocket('wss://ws.finnhub.io?token=c34391qad3i8edlcgrgg');\n    //     this.getUserStocks();\n        \n    // }\n    // componentWillUnmount(){\n        \n    //     this.state.stocks.forEach(symbol=>{\n    //         this.connection.send(JSON.stringify({'type':'unsubscribe', 'symbol': symbol.Symbol}));\n            \n    //     })\n    //     this.connection.close();\n    //     // Perform any necessary cleanup in this method, such as invalidating timers, canceling network requests, \n    //     // or cleaning up any subscriptions that were created in componentDidMount().\n    // }\n    // componentDidUpdate(prevProps, prevState) {\n    //     if (prevProps.stocks !== this.props.stocks) {\n    //       console.log('stocks state has changed.')\n    //     //   this.props.history.push(\"/profile\",[[{email:this.state.email}],this.state.stocks]);\n    //         this.setState({stocks:this.props.stocks});\n    //     }\n    //   }\n    // toggle(event) {\n    //     this.setState({\n    //       dropdownOpen: !this.state.dropdownOpen,\n    //       value: event.currentTarget.textContent\n    //     });\n    //   }\n    // saveNewStockTrade= (event) => {\n        \n    //     let result = JSON.parse(event.data)\n    //     console.log(result)\n    //     let user_watchlist = this.state.stocks\n    //     console.log(\"InsidesaveNewStockTrade: \", user_watchlist)\n    //     if(result.type===\"trade\"){\n    //         user_watchlist.forEach(symbol => {\n    //             var tradePrice= result.data.filter((i,n)=>i.s===symbol.Symbol);\n    //             if(tradePrice.length !==0){\n    //                 symbol.currentPrice = tradePrice[tradePrice.length-1].p; \n    //                 console.log(\"Found Updated price for \",symbol.Symbol)\n    //                 // socket.send(JSON.stringify({'type':'unsubscribe', 'symbol': symbol.name}))\n    //             }\n    //         })\n            \n    //     }\n    //     this.setState({stocks:user_watchlist});\n    // }\n     \n    // componentDidMount(){\n       \n    //     this.connection.onopen = ()=> { \n    //         if (this.state.stocks!==\"No stocks added\"){\n    //             this.state.stocks.forEach(symbol=>{\n    //                 this.connection.send(JSON.stringify({'type':'subscribe', 'symbol': symbol.Symbol}));\n    //                 console.log(\"Inside OnOpen: Subscribed To: \", symbol.Symbol)\n    //             })\n    //         }\n    //         else{\n    //             console.log(\"no stocks added to subscribe to\");\n    //         }\n            \n    //     }\n    //     this.connection.onmessage= this.saveNewStockTrade;\n    //     this.connection.onclose = () => { this.setState({connectionError: true}) }\n    // }\n    \n    // updateDropdown(){\n    //     var Message = \"Your WatchList\";\n    //     if(this.state.stocks===\"No stocks added\"){\n    //         Message =\"Empty Watchlist\"; \n    //     }\n    //     var MessageArrowDir;\n    //     if(this.state.dropdownOpen){\n    //       MessageArrowDir = \"\\u25BC\";\n    //     }\n    \n    //     else{\n    //       MessageArrowDir = \"\\u25B2\";\n    //     }\n        \n    //     var header =\n    //         <> <div className = \"dropDiv\">\n    //             <Button className = \"FakeDropDown\" onClick = {(e)=>{this.doNothing(e)}}><span style={{marginLeft:\"55px\"}}>{Message}</span></Button>\n    \n    //             <Button className = \"realDropDown \"onClick = {this.toggle} aria-expanded = {this.state.dropdownOpen}\n    //                     data-toggle = \"dropdown\" aria-haspopup=\"true\"><span style={{fontSize:\"18px\"}}>{MessageArrowDir}</span></Button>\n    \n    //         </div></>\n        \n    //     if(this.state.stocks!==\"No stocks added\"){\n    //     var display = \n    //     <Dropdown style = {{marginBottom:\"20px\"}} isOpen={this.state.dropdownOpen}>\n    //         {header}\n    \n    //         <DropdownMenu className = \"DDM\">\n    //           <div className = \"ArtistsDisplayWrapper\">\n    //             {this.state.stocks.map((stocks,index) =>\n                \n    //         <div className = \"ArtistLine\" style = {{marginBottom:\"55px\"}}>\n                \n    //             <button  onClick = {(e)=>{this.doNothing(e)}} className = \"artistButton\">{stocks.Symbol}</button>\n    //             <button id = {stocks.symbol} onClick = {(e)=>{this.doNothing(e)}} className = \"playArtistButton\">${stocks.currentPrice}</button>\n    //             <button onClick = {(e)=>{this.removeStock(e,stocks.Symbol)}} className = \"removeButton\">X</button> \n    //         </div>\n    //             )}\n    //           </div>\n    //         </DropdownMenu>\n    //     </Dropdown>\n    //     this.setState({dropdownDisplay:display});\n    //             }\n    //             else{\n    //                 this.setState({dropdownDisplay:header});\n    //             }\n        \n\n    // }\n   \n    removeStock(htmlEvent,stock){\n        //unsubsribe from listening to thsi stock\n       console.log(\"Unsubscribing from: \",stock.Symbol)\n        // this.connection.send(JSON.stringify({'type':'unsubscribe', 'symbol': stock}))\n        //first stop the htmlEvents default status\n        htmlEvent.preventDefault();\n        var user={\n            email:this.props.email,\n            stock_symbol: stock.Symbol,\n    \n        } \n        console.log(user)\n        var url = '/api/removeUserStock';\n        const req = new Request(url,{\n            method:\"POST\",\n            headers:{\"Content-Type\":\"application/json\"},\n            body:JSON.stringify(user),\n        });\n        fetch(req)\n        .then((res)=>{\n            console.log(res)\n            if(res.status===500){\n            res.json()\n            .then((json)=>{\n                const {message,stackTrace}=json;\n              })\n              .catch((error)=>{\n                return Promise.reject(error);\n              });\n            }\n            else{\n                \n              return res.json();\n            }\n          })\n          .then((result)=> {\n              \n              console.log(\"1st remove stock rerender\");\n              this.setState({remove_status:result},()=>this.removeHelper())});\n    \n    }\n    \n    removeHelper(){\n        console.log(\"p/179\",this.state.remove_status);\n        //removed but still showing on watch list\n        if(this.state.remove_status.response===\"Stock not on watch list\"){\n            alert(\"Stock Queued For Deletion, Please Login In Again\");\n        }\n        //stock has been removed from watchlist\n        else if(this.state.remove_status.Response===\"Sucessfully removed stock\"){\n            console.log(\"2nd remove stock rerender\");\n            this.setState({stockHasBeenRemoved:true});\n           \n        }\n    }\n    // getUserStocks(){\n    //     var user={ \n    //         email: this.state.email,\n    //     }\n    //     var url = \"/api/getUserStocks\";\n    //     const req = new Request(url,{\n    //         method:\"POST\",\n    //         headers:{\"Content-Type\":\"application/json\"},\n    //         body:JSON.stringify(user),\n    //     });\n    //     fetch(req)\n    //     .then((res)=>{\n           \n    //         return res.json();\n    //     }).catch((error)=>{\n    //         console.log(\"p/121\");\n    //         console.log(error);\n    //         return Promise.reject(error);\n    //         })\n    //     .then(stock_results => {\n    //         console.log(\"3rdt ADD/remove Stock Rerender\");\n    //         this.setState({stocks:stock_results},()=>this.updatePage)});\n        \n    // }\n    \n    // updatePage(){\n    //     console.log(\"In update page \",this.state.stocks);\n        \n    //     this.props.history.push(\"/profile\",[[{email:this.state.email}],this.state.stocks])\n        \n        \n        \n    // }\n    \n    // UpdateStockOnPage(){\n    //     if(this.state.stock_symbol_status === 'User had already added this stock'){\n    //         alert(\"This stock is already on your watchlist\");\n    //     }\n        \n    //     else{\n    //         console.log(\"2nd ADD Stock Rerender\");\n    //         this.setState({stock_symbol_status:\"\",Remove_Status:\"\"},()=>this.getUserStocks());\n    //     }\n    // }\n\n    // addUserStock(){\n    //     if(this.state.stock_symbol_status !== \"stock not found\"){\n    //         console.log(\"Subscribing to \",this.state.stock_to_watch)\n    //         this.connection.send(JSON.stringify({'type':'subscribe', 'symbol': this.state.stock_to_watch}))\n    //         var user={\n    //             email:this.props.email,\n    //             addStock: this.state.stock_to_watch\n    //         } \n           \n    //         var url=\"/api/AddUserStocks\";\n    //         const req = new Request(url,{\n    //             method:\"POST\",\n    //             headers:{\"Content-Type\":\"application/json\"},\n    //             body:JSON.stringify(user),\n    //         });\n    //         fetch(req)\n    //         .then((res)=>{\n                \n    //             return res.json();\n    //         }).catch((error)=>{\n    //             return Promise.reject(error);\n    //           })\n    //         .then(result => {\n    //             console.log(\"1st ADD Stock Rerender\");\n    //             this.setState({stock_symbol_status: result},()=>this.UpdateStockOnPage())});\n            \n    //     }\n    \n    //     else{\n    //         //put in this functionality \n    //         alert(\"stock not found\");\n    //     }\n        \n        \n    // }\n    // handleChange(event) {\n         \n    //     this.setState({stock_to_watch: event.target.value});\n    //   }\n\n    renderStockChart(event){\n      console.log(event.dataItem.Symbol)\n      this.setState({chartStock:event.dataItem.Symbol})\n    }\n    render(){\n        \n    \n        // console.log(\"In render: \", this.state.stocks,this.props.stocks);\n        // // console.log(\"In render: \", this.state.dropdownDisplay);\n        // if (this.state == null){\n        //     this.props.history.push(\"/error\");\n        //     }\n        \n        \n        // var Message = \"Your WatchList\";\n        // if(this.state.stocks===\"No stocks added\"){\n        //     Message =\"Empty Watchlist\"; \n        // }\n        // var MessageArrowDir;\n        // if(this.state.dropdownOpen){\n        //   MessageArrowDir = \"\\u25BC\";\n        // }\n    \n        // else{\n        //   MessageArrowDir = \"\\u25B2\";\n        // }\n        \n        // var dropdownDisplay =\n        //     <> <div className = \"dropDiv\">\n        //         <Button className = \"FakeDropDown\" onClick = {(e)=>{this.doNothing(e)}}><span style={{marginLeft:\"55px\"}}>{Message}</span></Button>\n    \n        //         <Button className = \"realDropDown \"onClick = {this.toggle} aria-expanded = {this.state.dropdownOpen}\n        //                 data-toggle = \"dropdown\" aria-haspopup=\"true\"><span style={{fontSize:\"18px\"}}>{MessageArrowDir}</span></Button>\n    \n        //     </div></>\n        // var dropdown;\n        // if(this.state.stocks!==\"No stocks added\"){\n    \n        // dropdown = \n    \n        // <Dropdown style = {{marginBottom:\"20px\"}} isOpen={this.state.dropdownOpen}>\n        //     {dropdownDisplay}\n    \n        //     <DropdownMenu className = \"DDM\">\n        //       <div className = \"ArtistsDisplayWrapper\">\n        //         {this.state.stocks.map((stocks,index) =>\n                \n        //     <div className = \"ArtistLine\" style = {{marginBottom:\"55px\"}}>\n                \n        //         <button  onClick = {(e)=>{this.doNothing(e)}} className = \"artistButton\">{stocks.Symbol}</button>\n        //         <button id = {stocks.symbol} onClick = {(e)=>{this.doNothing(e)}} className = \"playArtistButton\">${stocks.currentPrice}</button>\n        //         <button onClick = {(e)=>{this.removeStock(e,stocks.Symbol)}} className = \"removeButton\">X</button> \n        //     </div>\n        //         )}\n        //       </div>\n        //     </DropdownMenu>\n        // </Dropdown>\n        // }\n        // else{\n        //     dropdown = dropdownDisplay;\n    \n           \n      \n        // }\n       \n        // var trackButton = <Button onClick = {this.getStockInfo} className= \"Button\" id = \"TrackButton\" >Track </Button>;\n        \n        // this.props.history.push(\"/error\",this.state)\n        // onClick={this.props.onClick}\n        var useData;\n\n        if(this.props.stocks !==\"No stocks added\")useData=this.props.stocks\n        else{\n          useData=[{\n            Symbol:\"Add stocks\",\n            currenPrice:\"Add stocks\"\n          },]\n        }\n        console.log(this.state.eodData)\n        return (\n          \n          \n          <Tooltip openDelay={100} position=\"right\" >\n            <Grid\n            data={useData}\n            // style={{ height: 700 }}\n            onRowClick= {this.renderStockChart}\n            title=\"WatchList\"\n             >\n               \n            \n  \n    <GridColumn title=\"Name\" field=\"name\" />\n    <GridColumn title=\"Symbol\" field=\"Symbol\"style={{ width: 100 }} locked={false} width={100} />\n    <GridColumn title=\"Current Price\" field=\"currentPrice\" />\n    \n    {/* <GridColumn title=\"View Chart\" id=\"Symbol\" cell={tooltiprender} width=\"200px\" /> */}\n    \n    <GridColumn title=\"Change\" field=\"day_change\" />\n    <GridColumn title=\"% Change\" field=\"change_pct\" />\n    <GridColumn title=\"Volume\" field=\"volume\" />\n    <GridColumn title=\"Market Cap\" field=\"market_cap\" /> \n    <GridColumn title=\"View Options\" id=\"Symbol\" cell={this.CommandCell} width=\"200px\" />\n    <GridColumn title=\"Tracker\" id=\"Symbol\" cell={this.CommandCell} width=\"200px\" />\n    <GridColumn title=\"Remove From WatchList\" id=\"Symbol\" cell={this.CommandCell} width=\"200px\" />\n\n    \n\n          </Grid>\n          </Tooltip>\n         \n          \n          );\n        }\n})\n"]},"metadata":{},"sourceType":"module"}