{"ast":null,"code":"var _jsxFileName = \"/Users/samehrlich/Desktop/final-app/client/src/signUp.js\";\nimport React, { Component } from \"react\";\nimport { Button } from \"reactstrap/es\";\nimport { withRouter } from \"react-router-dom\";\nimport \"./CSS/GlobalCSS.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst bcrypt = require('bcrypt-nodejs/bCrypt');\n\nclass signUp extends Component {\n  constructor(props) {\n    super(props);\n    this.handlePassword = this.handlePassword.bind(this);\n    this.handleEmail = this.handleEmail.bind(this);\n    this.routeChange = this.routeChange.bind(this);\n    this.test = this.test.bind(this);\n    this.state = {\n      password: \"\",\n      email: \"\"\n    };\n  }\n\n  handleEmail(event) {\n    this.setState({\n      email: event.target.value\n    });\n  }\n\n  handlePassword(event) {\n    this.setState({\n      password: event.target.value\n    });\n  } // Handle to new Brower path\n\n\n  routeChange(value) {\n    if (value.target.id === \"back\") {\n      this.props.history.push(\"/\", this.props.history.location.state);\n    } else if (value.target.id == \"Home\") {\n      this.props.history.push(\"/home\", this.props.history.location.state);\n    }\n  } //Test the users email and password input\n\n\n  test() {\n    //used to check if the password has 7-15 characts and contrains at least one numeric dogot and a special character\n    var secureCheck = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/;\n\n    if (this.state.password.match(secureCheck)) {\n      var user = {\n        email: this.state.email,\n        password: bcrypt.hashSync(this.state.password)\n      };\n      console.log(user);\n      var url = \"/api/signup\";\n      const req = new Request(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(user)\n      });\n      fetch(req).then(res => {\n        //Catch server error\n        //no error\n        return res.json();\n      }).catch(error => {\n        console.log(error);\n        return Promise.reject(error);\n      }).then(query_result => this.setState({\n        query: [[{\n          email: this.state.email\n        }], []],\n        SignStatus: query_result\n      }, () => console.log(query_result))).then(() => {\n        if (this.state.SignStatus === \"Unconfirmed User Added\") {\n          this.props.history.push(\"/confirmEmail\");\n        } else if (this.state.SignStatus === \"Duplicate Email\") {\n          this.setState.SignStatus = \"\";\n          alert(\"Email Is Currently In Use\");\n        }\n      });\n    } else {\n      alert(\"Password must have 7 to 15 characters and contain at least one numeric digit and a special character\");\n    }\n  }\n\n  render() {\n    console.log(\"Sign Status\", this.state.SignStatus); //email has not been confirmed yet \n    // if (this.state.SignStatus === \"Unconfirmed User Added\"){\n    //     this.props.history.push(\"/confirmEmail\");\n    // }\n    //email submitted is already in the database\n    // else if (this.state.SignStatus === \"Duplicate Email\"){\n    //     this.setState.SignStatus = \"\";\n    //     alert(\"Email Is Currently In Use\")\n    // }\n\n    var color = \"white\"; //if password is empy set the box to white\n\n    if (this.state.password === null || this.state.password.length === 0) {\n      color = \"white\";\n    } //if password matches the constraints set the box to green\n    else if (this.state.password.match(/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/)) {\n        color = \"green\";\n      } //otherwise the password is not valid so set the box to red\n      else {\n          color = \"red\";\n        }\n\n    var styleAttr = {\n      borderBottom: \"2px solid \" + color\n    };\n    var leftarrow = \"\\u2190\";\n\n    var passwordInput = /*#__PURE__*/_jsxDEV(\"input\", {\n      style: styleAttr,\n      onChange: this.handlePassword,\n      className: \"FormField-Input_Ls\",\n      placeholder: \"Create a Password\",\n      type: \"Password\",\n      name: \"Password\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 29\n    }, this);\n\n    var emailInput = /*#__PURE__*/_jsxDEV(\"input\", {\n      onChange: this.handleEmail,\n      className: \"FormField_Input_LS\",\n      placeholder: \"Email\",\n      type: \"text\",\n      name: \"Email\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 26\n    }, this);\n\n    var backButton = /*#__PURE__*/_jsxDEV(Button, {\n      className: \"Button\",\n      id: \"back\",\n      onClick: this.routeChange,\n      children: leftarrow\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 26\n    }, this);\n\n    var signUpButton = /*#__PURE__*/_jsxDEV(Button, {\n      onClick: this.test,\n      className: \"Button\",\n      id: \"SignupButton\",\n      children: \"Create Account\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 28\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"CenterWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"HeaderInfo\",\n        id: \"TitleTextSignUp\",\n        children: \"Sign Up!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"FormWrap\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"FormField\",\n          children: emailInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"FormField\",\n          children: passwordInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this), backButton, signUpButton]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }, this);\n  }\n\n}\n\nexport default withRouter(signUp);","map":{"version":3,"sources":["/Users/samehrlich/Desktop/final-app/client/src/signUp.js"],"names":["React","Component","Button","withRouter","bcrypt","require","signUp","constructor","props","handlePassword","bind","handleEmail","routeChange","test","state","password","email","event","setState","target","value","id","history","push","location","secureCheck","match","user","hashSync","console","log","url","req","Request","method","headers","body","JSON","stringify","fetch","then","res","json","catch","error","Promise","reject","query_result","query","SignStatus","alert","render","color","length","styleAttr","borderBottom","leftarrow","passwordInput","emailInput","backButton","signUpButton"],"mappings":"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","sourcesContent":["import React,{Component} from \"react\";\nimport {Button} from \"reactstrap/es\";\nimport {withRouter} from \"react-router-dom\";\nimport \"./CSS/GlobalCSS.css\";\n\nconst bcrypt = require('bcrypt-nodejs/bCrypt');\n\nclass signUp extends Component{\n    constructor(props){\n        super(props);\n        this.handlePassword=this.handlePassword.bind(this);\n        this.handleEmail=this.handleEmail.bind(this);\n        this.routeChange=this.routeChange.bind(this);\n        this.test=this.test.bind(this);\n        this.state={\n            password:\"\",\n            email:\"\"\n        }\n    }\n\n    handleEmail(event){\n        this.setState({email: event.target.value});\n    }\n\n    handlePassword(event){\n        this.setState({password: event.target.value});\n    }\n\n    // Handle to new Brower path\n    routeChange(value){\n        if (value.target.id === \"back\"){\n            this.props.history.push(\"/\",this.props.history.location.state);\n          }\n    \n          else if(value.target.id==\"Home\"){\n            this.props.history.push(\"/home\",this.props.history.location.state);\n          }\n    }\n\n    //Test the users email and password input\n\n    test(){\n        //used to check if the password has 7-15 characts and contrains at least one numeric dogot and a special character\n        var secureCheck = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/;\n        if(this.state.password.match(secureCheck)){\n            var user={\n                email:this.state.email,\n                password:bcrypt.hashSync(this.state.password)\n            }\n            \n            console.log(user);\n\n            var url=\"/api/signup\";\n            const req = new Request(url,{\n                method:\"POST\",\n                headers:{\"Content-Type\":\"application/json\"},\n                body:JSON.stringify(user),\n\n            });\n            fetch(req)\n            .then((res)=>{\n                //Catch server error\n                    //no error\n                    return res.json();\n                }).catch((error)=>{\n                    console.log(error);\n                    return Promise.reject(error);\n                })\n            .then(query_result => this.setState({query:[[{email:this.state.email}],[]],SignStatus:query_result},()=> console.log(query_result)))\n            .then(()=>{\n                if (this.state.SignStatus === \"Unconfirmed User Added\"){\n                    this.props.history.push(\"/confirmEmail\");\n                }\n                else if (this.state.SignStatus === \"Duplicate Email\"){\n                    this.setState.SignStatus = \"\";\n                    alert(\"Email Is Currently In Use\")\n                }\n                \n            });\n\n        }\n        else{\n            alert(\"Password must have 7 to 15 characters and contain at least one numeric digit and a special character\");\n           }\n\n    }\n\n    render(){\n        console.log(\"Sign Status\",this.state.SignStatus)\n\n        //email has not been confirmed yet \n        // if (this.state.SignStatus === \"Unconfirmed User Added\"){\n        //     this.props.history.push(\"/confirmEmail\");\n        // }\n        //email submitted is already in the database\n        // else if (this.state.SignStatus === \"Duplicate Email\"){\n        //     this.setState.SignStatus = \"\";\n        //     alert(\"Email Is Currently In Use\")\n        // }\n        var color = \"white\";\n        //if password is empy set the box to white\n        if(this.state.password === null || this.state.password.length === 0){\n            color = \"white\";\n        }\n        //if password matches the constraints set the box to green\n        else if(this.state.password.match(/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/)){\n            color = \"green\";\n          }\n        //otherwise the password is not valid so set the box to red\n        else{\n            color = \"red\"\n          }\n\n        var styleAttr = {borderBottom:\"2px solid \"+color}\n        var leftarrow = \"\\u2190\"\n\n        var passwordInput = <input style = {styleAttr} onChange={this.handlePassword} className= \"FormField-Input_Ls\" placeholder= \"Create a Password\" type=\"Password\" name=\"Password\" />\n        var emailInput = <input onChange={this.handleEmail} className= \"FormField_Input_LS\" placeholder=\"Email\" type=\"text\" name=\"Email\"/>\n        var backButton = <Button className=\"Button\" id= \"back\" onClick={this.routeChange}>{leftarrow}</Button>\n        var signUpButton = <Button onClick={this.test} className= \"Button\" id=\"SignupButton\">Create Account</Button>\n        return(\n                \n    <div className= \"CenterWrapper\">\n\n        <div className= \"HeaderInfo\" id=\"TitleTextSignUp\">\n        Sign Up!\n        </div>\n\n        <div className = \"FormWrap\">\n        \n            <div className=\"FormField\">\n                {emailInput}\n            </div>\n            \n            <div className=\"FormField\">\n                {passwordInput}\n            </div>\n\n            {backButton}\n            {signUpButton}\n\n        </div>\n    </div>\n        \n        );\n    }\n\n}\nexport default withRouter(signUp);"]},"metadata":{},"sourceType":"module"}