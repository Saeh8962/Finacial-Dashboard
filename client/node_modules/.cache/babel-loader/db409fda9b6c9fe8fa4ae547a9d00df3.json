{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _classCallCheck = require(\"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _assertThisInitialized = require(\"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _get = require(\"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/get\");\n\nvar _getPrototypeOf = require(\"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar _require = require(\"tough-cookie\"),\n    CookieJar = _require.CookieJar;\n\nvar NodeImpl = require(\"./Node-impl\").implementation;\n\nvar idlUtils = require(\"../generated/utils\");\n\nvar NODE_TYPE = require(\"../node-type\");\n\nvar _require2 = require(\"../../utils\"),\n    hasWeakRefs = _require2.hasWeakRefs,\n    mixin = _require2.mixin,\n    memoizeQuery = _require2.memoizeQuery;\n\nvar _require3 = require(\"../helpers/traversal\"),\n    firstChildWithLocalName = _require3.firstChildWithLocalName,\n    firstChildWithLocalNames = _require3.firstChildWithLocalNames,\n    firstDescendantWithLocalName = _require3.firstDescendantWithLocalName;\n\nvar whatwgURL = require(\"whatwg-url\");\n\nvar StyleSheetList = require(\"../generated/StyleSheetList.js\");\n\nvar _require4 = require(\"../helpers/internal-constants\"),\n    domSymbolTree = _require4.domSymbolTree;\n\nvar eventAccessors = require(\"../helpers/create-event-accessor\");\n\nvar _require5 = require(\"../helpers/strings\"),\n    asciiLowercase = _require5.asciiLowercase,\n    stripAndCollapseASCIIWhitespace = _require5.stripAndCollapseASCIIWhitespace;\n\nvar _require6 = require(\"../helpers/text\"),\n    childTextContent = _require6.childTextContent;\n\nvar _require7 = require(\"../helpers/namespaces\"),\n    HTML_NS = _require7.HTML_NS,\n    SVG_NS = _require7.SVG_NS;\n\nvar DOMException = require(\"domexception/webidl2js-wrapper\");\n\nvar _require8 = require(\"../../browser/parser\"),\n    parseIntoDocument = _require8.parseIntoDocument;\n\nvar History = require(\"../generated/History\");\n\nvar Location = require(\"../generated/Location\");\n\nvar HTMLCollection = require(\"../generated/HTMLCollection\");\n\nvar NodeList = require(\"../generated/NodeList\");\n\nvar validateName = require(\"../helpers/validate-names\").name;\n\nvar _require9 = require(\"../helpers/validate-names\"),\n    validateAndExtract = _require9.validateAndExtract;\n\nvar _require10 = require(\"../helpers/events\"),\n    fireAnEvent = _require10.fireAnEvent;\n\nvar _require11 = require(\"../helpers/shadow-dom\"),\n    shadowIncludingInclusiveDescendantsIterator = _require11.shadowIncludingInclusiveDescendantsIterator;\n\nvar _require12 = require(\"../helpers/custom-elements\"),\n    enqueueCECallbackReaction = _require12.enqueueCECallbackReaction;\n\nvar _require13 = require(\"../helpers/create-element\"),\n    _createElement = _require13.createElement,\n    internalCreateElementNSSteps = _require13.internalCreateElementNSSteps;\n\nvar IterableWeakSet = require(\"../helpers/iterable-weak-set\");\n\nvar DocumentOrShadowRootImpl = require(\"./DocumentOrShadowRoot-impl\").implementation;\n\nvar GlobalEventHandlersImpl = require(\"./GlobalEventHandlers-impl\").implementation;\n\nvar NonElementParentNodeImpl = require(\"./NonElementParentNode-impl\").implementation;\n\nvar ParentNodeImpl = require(\"./ParentNode-impl\").implementation;\n\nvar _require14 = require(\"../node\"),\n    clone = _require14.clone,\n    listOfElementsWithQualifiedName = _require14.listOfElementsWithQualifiedName,\n    listOfElementsWithNamespaceAndLocalName = _require14.listOfElementsWithNamespaceAndLocalName,\n    listOfElementsWithClassNames = _require14.listOfElementsWithClassNames;\n\nvar generatedAttr = require(\"../generated/Attr\");\n\nvar Comment = require(\"../generated/Comment\");\n\nvar ProcessingInstruction = require(\"../generated/ProcessingInstruction\");\n\nvar CDATASection = require(\"../generated/CDATASection\");\n\nvar Text = require(\"../generated/Text\");\n\nvar DocumentFragment = require(\"../generated/DocumentFragment\");\n\nvar DOMImplementation = require(\"../generated/DOMImplementation\");\n\nvar TreeWalker = require(\"../generated/TreeWalker\");\n\nvar NodeIterator = require(\"../generated/NodeIterator\");\n\nvar ShadowRoot = require(\"../generated/ShadowRoot\");\n\nvar Range = require(\"../generated/Range\");\n\nvar documents = require(\"../documents.js\");\n\nvar CustomEvent = require(\"../generated/CustomEvent\");\n\nvar ErrorEvent = require(\"../generated/ErrorEvent\");\n\nvar Event = require(\"../generated/Event\");\n\nvar FocusEvent = require(\"../generated/FocusEvent\");\n\nvar HashChangeEvent = require(\"../generated/HashChangeEvent\");\n\nvar KeyboardEvent = require(\"../generated/KeyboardEvent\");\n\nvar MessageEvent = require(\"../generated/MessageEvent\");\n\nvar MouseEvent = require(\"../generated/MouseEvent\");\n\nvar PopStateEvent = require(\"../generated/PopStateEvent\");\n\nvar ProgressEvent = require(\"../generated/ProgressEvent\");\n\nvar TouchEvent = require(\"../generated/TouchEvent\");\n\nvar UIEvent = require(\"../generated/UIEvent\");\n\nvar RequestManager = require(\"../../browser/resources/request-manager\");\n\nvar AsyncResourceQueue = require(\"../../browser/resources/async-resource-queue\");\n\nvar ResourceQueue = require(\"../../browser/resources/resource-queue\");\n\nvar PerDocumentResourceLoader = require(\"../../browser/resources/per-document-resource-loader\");\n\nfunction clearChildNodes(node) {\n  for (var child = domSymbolTree.firstChild(node); child; child = domSymbolTree.firstChild(node)) {\n    node.removeChild(child);\n  }\n}\n\nfunction pad(number) {\n  if (number < 10) {\n    return \"0\" + number;\n  }\n\n  return number;\n}\n\nfunction toLastModifiedString(date) {\n  return pad(date.getMonth() + 1) + \"/\" + pad(date.getDate()) + \"/\" + date.getFullYear() + \" \" + pad(date.getHours()) + \":\" + pad(date.getMinutes()) + \":\" + pad(date.getSeconds());\n}\n\nvar eventInterfaceTable = {\n  customevent: CustomEvent,\n  errorevent: ErrorEvent,\n  event: Event,\n  events: Event,\n  focusevent: FocusEvent,\n  hashchangeevent: HashChangeEvent,\n  htmlevents: Event,\n  keyboardevent: KeyboardEvent,\n  messageevent: MessageEvent,\n  mouseevent: MouseEvent,\n  mouseevents: MouseEvent,\n  popstateevent: PopStateEvent,\n  progressevent: ProgressEvent,\n  svgevents: Event,\n  touchevent: TouchEvent,\n  uievent: UIEvent,\n  uievents: UIEvent\n};\n\nvar DocumentImpl = /*#__PURE__*/function (_NodeImpl) {\n  _inherits(DocumentImpl, _NodeImpl);\n\n  var _super = _createSuper(DocumentImpl);\n\n  function DocumentImpl(globalObject, args, privateData) {\n    var _this;\n\n    _classCallCheck(this, DocumentImpl);\n\n    _this = _super.call(this, globalObject, args, privateData);\n\n    _this._initGlobalEvents();\n\n    _this._ownerDocument = _assertThisInitialized(_this);\n    _this.nodeType = NODE_TYPE.DOCUMENT_NODE;\n\n    if (!privateData.options) {\n      privateData.options = {};\n    }\n\n    if (!privateData.options.parsingMode) {\n      privateData.options.parsingMode = \"xml\";\n    }\n\n    if (!privateData.options.encoding) {\n      privateData.options.encoding = \"UTF-8\";\n    }\n\n    if (!privateData.options.contentType) {\n      privateData.options.contentType = privateData.options.parsingMode === \"xml\" ? \"application/xml\" : \"text/html\";\n    }\n\n    _this._parsingMode = privateData.options.parsingMode;\n    _this._implementation = DOMImplementation.createImpl(_this._globalObject, [], {\n      ownerDocument: _assertThisInitialized(_this)\n    });\n    _this._defaultView = privateData.options.defaultView || null;\n    _this._global = privateData.options.global;\n    _this._ids = Object.create(null);\n    _this._attached = true;\n    _this._currentScript = null;\n    _this._pageShowingFlag = false;\n    _this._cookieJar = privateData.options.cookieJar;\n    _this._parseOptions = privateData.options.parseOptions || {};\n    _this._scriptingDisabled = privateData.options.scriptingDisabled;\n\n    if (_this._cookieJar === undefined) {\n      _this._cookieJar = new CookieJar(null, {\n        looseMode: true\n      });\n    }\n\n    if (_this._scriptingDisabled) {\n      _this._parseOptions.scriptingEnabled = false;\n    }\n\n    _this.contentType = privateData.options.contentType;\n    _this._encoding = privateData.options.encoding;\n    var urlOption = privateData.options.url === undefined ? \"about:blank\" : privateData.options.url;\n    var parsed = whatwgURL.parseURL(urlOption);\n\n    if (parsed === null) {\n      throw new TypeError(\"Could not parse \\\"\".concat(urlOption, \"\\\" as a URL\"));\n    }\n\n    _this._URL = parsed;\n    _this._origin = urlOption === \"about:blank\" && privateData.options.parentOrigin ? privateData.options.parentOrigin : whatwgURL.serializeURLOrigin(_this._URL);\n    _this._location = Location.createImpl(_this._globalObject, [], {\n      relevantDocument: _assertThisInitialized(_this)\n    });\n    _this._history = History.createImpl(_this._globalObject, [], {\n      window: _this._defaultView,\n      document: _assertThisInitialized(_this),\n      actAsIfLocationReloadCalled: function actAsIfLocationReloadCalled() {\n        return _this._location.reload();\n      }\n    });\n\n    if (hasWeakRefs) {\n      _this._workingNodeIterators = new IterableWeakSet();\n    } else {\n      _this._workingNodeIterators = [];\n    }\n\n    _this._referrer = privateData.options.referrer || \"\";\n    _this._lastModified = toLastModifiedString(privateData.options.lastModified || new Date());\n    _this._asyncQueue = new AsyncResourceQueue();\n    _this._queue = new ResourceQueue({\n      asyncQueue: _this._asyncQueue,\n      paused: false\n    });\n    _this._deferQueue = new ResourceQueue({\n      paused: true\n    });\n    _this._requestManager = new RequestManager();\n    _this._currentDocumentReadiness = privateData.options.readyState || \"loading\";\n    _this._lastFocusedElement = null;\n    _this._resourceLoader = new PerDocumentResourceLoader(_assertThisInitialized(_this)); // Each Document in a browsing context can also have a latest entry. This is the entry for that Document\n    // to which the browsing context's session history was most recently traversed. When a Document is created,\n    // it initially has no latest entry.\n\n    _this._latestEntry = null; // https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#throw-on-dynamic-markup-insertion-counter\n\n    _this._throwOnDynamicMarkupInsertionCounter = 0;\n    return _this;\n  }\n\n  _createClass(DocumentImpl, [{\n    key: \"_getTheParent\",\n    value: function _getTheParent(event) {\n      if (event.type === \"load\" || !this._defaultView) {\n        return null;\n      }\n\n      return idlUtils.implForWrapper(this._defaultView);\n    }\n  }, {\n    key: \"compatMode\",\n    get: function get() {\n      return this._parsingMode === \"xml\" || this.doctype ? \"CSS1Compat\" : \"BackCompat\";\n    }\n  }, {\n    key: \"charset\",\n    get: function get() {\n      return this._encoding;\n    }\n  }, {\n    key: \"characterSet\",\n    get: function get() {\n      return this._encoding;\n    }\n  }, {\n    key: \"inputEncoding\",\n    get: function get() {\n      return this._encoding;\n    }\n  }, {\n    key: \"doctype\",\n    get: function get() {\n      var _iterator = _createForOfIteratorHelper(domSymbolTree.childrenIterator(this)),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var childNode = _step.value;\n\n          if (childNode.nodeType === NODE_TYPE.DOCUMENT_TYPE_NODE) {\n            return childNode;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"URL\",\n    get: function get() {\n      return whatwgURL.serializeURL(this._URL);\n    }\n  }, {\n    key: \"documentURI\",\n    get: function get() {\n      return whatwgURL.serializeURL(this._URL);\n    }\n  }, {\n    key: \"location\",\n    get: function get() {\n      return this._defaultView ? this._location : null;\n    } // https://dom.spec.whatwg.org/#dom-document-documentelement\n\n  }, {\n    key: \"documentElement\",\n    get: function get() {\n      var _iterator2 = _createForOfIteratorHelper(domSymbolTree.childrenIterator(this)),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var childNode = _step2.value;\n\n          if (childNode.nodeType === NODE_TYPE.ELEMENT_NODE) {\n            return childNode;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"implementation\",\n    get: function get() {\n      return this._implementation;\n    },\n    set: function set(implementation) {\n      this._implementation = implementation;\n    }\n  }, {\n    key: \"defaultView\",\n    get: function get() {\n      return this._defaultView;\n    }\n  }, {\n    key: \"currentScript\",\n    get: function get() {\n      return this._currentScript;\n    }\n  }, {\n    key: \"readyState\",\n    get: function get() {\n      return this._currentDocumentReadiness;\n    },\n    set: function set(state) {\n      this._currentDocumentReadiness = state;\n      fireAnEvent(\"readystatechange\", this);\n    }\n  }, {\n    key: \"hasFocus\",\n    value: function hasFocus() {\n      return Boolean(this._lastFocusedElement);\n    }\n  }, {\n    key: \"_descendantRemoved\",\n    value: function _descendantRemoved(parent, child) {\n      if (child.tagName === \"STYLE\") {\n        this.styleSheets._remove(child.sheet);\n      }\n\n      _get(_getPrototypeOf(DocumentImpl.prototype), \"_descendantRemoved\", this).call(this, parent, child);\n    }\n  }, {\n    key: \"write\",\n    value: function write() {\n      var text = \"\";\n\n      for (var i = 0; i < arguments.length; ++i) {\n        text += i < 0 || arguments.length <= i ? undefined : arguments[i];\n      }\n\n      if (this._parsingMode === \"xml\") {\n        throw DOMException.create(this._globalObject, [\"Cannot use document.write on XML documents\", \"InvalidStateError\"]);\n      }\n\n      if (this._throwOnDynamicMarkupInsertionCounter > 0) {\n        throw DOMException.create(this._globalObject, [\"Cannot use document.write while a custom element upgrades\", \"InvalidStateError\"]);\n      }\n\n      if (this._writeAfterElement) {\n        // If called from an script element directly (during the first tick),\n        // the new elements are inserted right after that element.\n        var tempDiv = this.createElement(\"div\");\n        tempDiv.innerHTML = text;\n        var child = tempDiv.firstChild;\n        var previous = this._writeAfterElement;\n        var parent = this._writeAfterElement.parentNode;\n\n        while (child) {\n          var node = child;\n          child = child.nextSibling;\n          node._isMovingDueToDocumentWrite = true; // hack for script execution\n\n          parent.insertBefore(node, previous.nextSibling);\n          node._isMovingDueToDocumentWrite = false;\n          previous = node;\n        }\n      } else if (this.readyState === \"loading\") {\n        // During page loading, document.write appends to the current element\n        // Find the last child that has been added to the document.\n        if (this.lastChild) {\n          var _node = this;\n\n          while (_node.lastChild && _node.lastChild.nodeType === NODE_TYPE.ELEMENT_NODE) {\n            _node = _node.lastChild;\n          }\n\n          _node.innerHTML = text;\n        } else {\n          clearChildNodes(this);\n          parseIntoDocument(text, this);\n        }\n      } else if (text) {\n        clearChildNodes(this);\n        parseIntoDocument(text, this);\n      }\n    }\n  }, {\n    key: \"writeln\",\n    value: function writeln() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      this.write.apply(this, args.concat([\"\\n\"]));\n    } // This is implemented separately for Document (which has a _ids cache) and DocumentFragment (which does not).\n\n  }, {\n    key: \"getElementById\",\n    value: function getElementById(id) {\n      var _this2 = this;\n\n      if (!this._ids[id]) {\n        return null;\n      } // Let's find the first element with where it's root is the document.\n\n\n      var matchElement = this._ids[id].find(function (candidate) {\n        var root = candidate;\n\n        while (domSymbolTree.parent(root)) {\n          root = domSymbolTree.parent(root);\n        }\n\n        return root === _this2;\n      });\n\n      return matchElement || null;\n    }\n  }, {\n    key: \"referrer\",\n    get: function get() {\n      return this._referrer || \"\";\n    }\n  }, {\n    key: \"lastModified\",\n    get: function get() {\n      return this._lastModified;\n    }\n  }, {\n    key: \"images\",\n    get: function get() {\n      return this.getElementsByTagName(\"IMG\");\n    }\n  }, {\n    key: \"embeds\",\n    get: function get() {\n      return this.getElementsByTagName(\"EMBED\");\n    }\n  }, {\n    key: \"plugins\",\n    get: function get() {\n      return this.embeds;\n    }\n  }, {\n    key: \"links\",\n    get: function get() {\n      var _this3 = this;\n\n      return HTMLCollection.createImpl(this._globalObject, [], {\n        element: this,\n        query: function query() {\n          return domSymbolTree.treeToArray(_this3, {\n            filter: function filter(node) {\n              return (node._localName === \"a\" || node._localName === \"area\") && node.hasAttributeNS(null, \"href\") && node._namespaceURI === HTML_NS;\n            }\n          });\n        }\n      });\n    }\n  }, {\n    key: \"forms\",\n    get: function get() {\n      return this.getElementsByTagName(\"FORM\");\n    }\n  }, {\n    key: \"scripts\",\n    get: function get() {\n      return this.getElementsByTagName(\"SCRIPT\");\n    }\n  }, {\n    key: \"anchors\",\n    get: function get() {\n      var _this4 = this;\n\n      return HTMLCollection.createImpl(this._globalObject, [], {\n        element: this,\n        query: function query() {\n          return domSymbolTree.treeToArray(_this4, {\n            filter: function filter(node) {\n              return node._localName === \"a\" && node.hasAttributeNS(null, \"name\") && node._namespaceURI === HTML_NS;\n            }\n          });\n        }\n      });\n    } // The applets attribute must return an\n    // HTMLCollection rooted at the Document node,\n    // whose filter matches nothing.\n    // (It exists for historical reasons.)\n\n  }, {\n    key: \"applets\",\n    get: function get() {\n      return HTMLCollection.createImpl(this._globalObject, [], {\n        element: this,\n        query: function query() {\n          return [];\n        }\n      });\n    }\n  }, {\n    key: \"open\",\n    value: function open() {\n      var child = domSymbolTree.firstChild(this);\n\n      while (child) {\n        this.removeChild(child);\n        child = domSymbolTree.firstChild(this);\n      }\n\n      this._modified();\n\n      return this;\n    }\n  }, {\n    key: \"close\",\n    value: function close(noQueue) {\n      var _this5 = this;\n\n      // In some cases like when creating an empty iframe, I want to emit the\n      // events right away to avoid problems if later I asign the property src.\n      if (noQueue) {\n        this.readyState = \"complete\";\n        fireAnEvent(\"DOMContentLoaded\", this, undefined, {\n          bubbles: true\n        });\n        fireAnEvent(\"load\", this);\n        return;\n      }\n\n      this._queue.resume();\n\n      var dummyPromise = Promise.resolve();\n\n      var onDOMContentLoad = function onDOMContentLoad() {\n        var doc = _this5;\n\n        function dispatchEvent() {\n          // https://html.spec.whatwg.org/#the-end\n          doc.readyState = \"interactive\";\n          fireAnEvent(\"DOMContentLoaded\", doc, undefined, {\n            bubbles: true\n          });\n        }\n\n        return new Promise(function (resolve) {\n          if (!_this5._deferQueue.tail) {\n            dispatchEvent();\n            resolve();\n            return;\n          }\n\n          _this5._deferQueue.setListener(function () {\n            dispatchEvent();\n            resolve();\n          });\n\n          _this5._deferQueue.resume();\n        });\n      };\n\n      var onLoad = function onLoad() {\n        var doc = _this5;\n\n        function dispatchEvent() {\n          doc.readyState = \"complete\";\n          fireAnEvent(\"load\", doc);\n        }\n\n        return new Promise(function (resolve) {\n          if (_this5._asyncQueue.count() === 0) {\n            dispatchEvent();\n            resolve();\n            return;\n          }\n\n          _this5._asyncQueue.setListener(function () {\n            dispatchEvent();\n            resolve();\n          });\n        });\n      };\n\n      this._queue.push(dummyPromise, onDOMContentLoad, null); // Set the readyState to 'complete' once all resources are loaded.\n      // As a side-effect the document's load-event will be dispatched.\n\n\n      this._queue.push(dummyPromise, onLoad, null, true);\n    }\n  }, {\n    key: \"getElementsByName\",\n    value: function getElementsByName(elementName) {\n      var _this6 = this;\n\n      return NodeList.createImpl(this._globalObject, [], {\n        element: this,\n        query: function query() {\n          return domSymbolTree.treeToArray(_this6, {\n            filter: function filter(node) {\n              return node.getAttributeNS && node.getAttributeNS(null, \"name\") === elementName;\n            }\n          });\n        }\n      });\n    }\n  }, {\n    key: \"title\",\n    get: function get() {\n      var documentElement = this.documentElement;\n      var value = \"\";\n\n      if (documentElement && documentElement._localName === \"svg\") {\n        var svgTitleElement = firstChildWithLocalName(documentElement, \"title\", SVG_NS);\n\n        if (svgTitleElement) {\n          value = childTextContent(svgTitleElement);\n        }\n      } else {\n        var titleElement = firstDescendantWithLocalName(this, \"title\");\n\n        if (titleElement) {\n          value = childTextContent(titleElement);\n        }\n      }\n\n      value = stripAndCollapseASCIIWhitespace(value);\n      return value;\n    },\n    set: function set(value) {\n      var documentElement = this.documentElement;\n      var element;\n\n      if (documentElement && documentElement._localName === \"svg\") {\n        element = firstChildWithLocalName(documentElement, \"title\", SVG_NS);\n\n        if (!element) {\n          element = this.createElementNS(SVG_NS, \"title\");\n\n          this._insert(element, documentElement.firstChild);\n        }\n\n        element.textContent = value;\n      } else if (documentElement && documentElement._namespaceURI === HTML_NS) {\n        var titleElement = firstDescendantWithLocalName(this, \"title\");\n        var headElement = this.head;\n\n        if (titleElement === null && headElement === null) {\n          return;\n        }\n\n        if (titleElement !== null) {\n          element = titleElement;\n        } else {\n          element = this.createElement(\"title\");\n\n          headElement._append(element);\n        }\n\n        element.textContent = value;\n      }\n    }\n  }, {\n    key: \"dir\",\n    get: function get() {\n      return this.documentElement ? this.documentElement.dir : \"\";\n    },\n    set: function set(value) {\n      if (this.documentElement) {\n        this.documentElement.dir = value;\n      }\n    }\n  }, {\n    key: \"head\",\n    get: function get() {\n      return this.documentElement ? firstChildWithLocalName(this.documentElement, \"head\") : null;\n    }\n  }, {\n    key: \"body\",\n    get: function get() {\n      var documentElement = this.documentElement;\n\n      if (!documentElement || documentElement._localName !== \"html\" || documentElement._namespaceURI !== HTML_NS) {\n        return null;\n      }\n\n      return firstChildWithLocalNames(this.documentElement, new Set([\"body\", \"frameset\"]));\n    },\n    set: function set(value) {\n      if (value === null || value._namespaceURI !== HTML_NS || value._localName !== \"body\" && value._localName !== \"frameset\") {\n        throw DOMException.create(this._globalObject, [\"Cannot set the body to null or a non-body/frameset element\", \"HierarchyRequestError\"]);\n      }\n\n      var bodyElement = this.body;\n\n      if (value === bodyElement) {\n        return;\n      }\n\n      if (bodyElement !== null) {\n        bodyElement.parentNode._replace(value, bodyElement);\n\n        return;\n      }\n\n      var documentElement = this.documentElement;\n\n      if (documentElement === null) {\n        throw DOMException.create(this._globalObject, [\"Cannot set the body when there is no document element\", \"HierarchyRequestError\"]);\n      }\n\n      documentElement._append(value);\n    }\n  }, {\n    key: \"_runPreRemovingSteps\",\n    value: function _runPreRemovingSteps(oldNode) {\n      // https://html.spec.whatwg.org/#focus-fixup-rule\n      if (oldNode === this.activeElement) {\n        this._lastFocusedElement = this.body;\n      }\n\n      var _iterator3 = _createForOfIteratorHelper(this._workingNodeIterators),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var activeNodeIterator = _step3.value;\n\n          activeNodeIterator._preRemovingSteps(oldNode);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"createEvent\",\n    value: function createEvent(type) {\n      var typeLower = type.toLowerCase();\n      var eventWrapper = eventInterfaceTable[typeLower] || null;\n\n      if (!eventWrapper) {\n        throw DOMException.create(this._globalObject, [\"The provided event type (\\\"\" + type + \"\\\") is invalid\", \"NotSupportedError\"]);\n      }\n\n      var impl = eventWrapper.createImpl(this._globalObject, [\"\"]);\n      impl._initializedFlag = false;\n      return impl;\n    }\n  }, {\n    key: \"createRange\",\n    value: function createRange() {\n      return Range.createImpl(this._globalObject, [], {\n        start: {\n          node: this,\n          offset: 0\n        },\n        end: {\n          node: this,\n          offset: 0\n        }\n      });\n    }\n  }, {\n    key: \"createProcessingInstruction\",\n    value: function createProcessingInstruction(target, data) {\n      validateName(this._globalObject, target);\n\n      if (data.includes(\"?>\")) {\n        throw DOMException.create(this._globalObject, [\"Processing instruction data cannot contain the string \\\"?>\\\"\", \"InvalidCharacterError\"]);\n      }\n\n      return ProcessingInstruction.createImpl(this._globalObject, [], {\n        ownerDocument: this,\n        target: target,\n        data: data\n      });\n    } // https://dom.spec.whatwg.org/#dom-document-createcdatasection\n\n  }, {\n    key: \"createCDATASection\",\n    value: function createCDATASection(data) {\n      if (this._parsingMode === \"html\") {\n        throw DOMException.create(this._globalObject, [\"Cannot create CDATA sections in HTML documents\", \"NotSupportedError\"]);\n      }\n\n      if (data.includes(\"]]>\")) {\n        throw DOMException.create(this._globalObject, [\"CDATA section data cannot contain the string \\\"]]>\\\"\", \"InvalidCharacterError\"]);\n      }\n\n      return CDATASection.createImpl(this._globalObject, [], {\n        ownerDocument: this,\n        data: data\n      });\n    }\n  }, {\n    key: \"createTextNode\",\n    value: function createTextNode(data) {\n      return Text.createImpl(this._globalObject, [], {\n        ownerDocument: this,\n        data: data\n      });\n    }\n  }, {\n    key: \"createComment\",\n    value: function createComment(data) {\n      return Comment.createImpl(this._globalObject, [], {\n        ownerDocument: this,\n        data: data\n      });\n    } // https://dom.spec.whatwg.org/#dom-document-createelement\n\n  }, {\n    key: \"createElement\",\n    value: function createElement(localName, options) {\n      validateName(this._globalObject, localName);\n\n      if (this._parsingMode === \"html\") {\n        localName = asciiLowercase(localName);\n      }\n\n      var isValue = null;\n\n      if (options && options.is !== undefined) {\n        isValue = options.is;\n      }\n\n      var namespace = this._parsingMode === \"html\" || this.contentType === \"application/xhtml+xml\" ? HTML_NS : null;\n      return _createElement(this, localName, namespace, null, isValue, true);\n    } // https://dom.spec.whatwg.org/#dom-document-createelementns\n\n  }, {\n    key: \"createElementNS\",\n    value: function createElementNS(namespace, qualifiedName, options) {\n      return internalCreateElementNSSteps(this, namespace, qualifiedName, options);\n    }\n  }, {\n    key: \"createDocumentFragment\",\n    value: function createDocumentFragment() {\n      return DocumentFragment.createImpl(this._globalObject, [], {\n        ownerDocument: this\n      });\n    }\n  }, {\n    key: \"createAttribute\",\n    value: function createAttribute(localName) {\n      validateName(this._globalObject, localName);\n\n      if (this._parsingMode === \"html\") {\n        localName = asciiLowercase(localName);\n      }\n\n      return this._createAttribute({\n        localName: localName\n      });\n    }\n  }, {\n    key: \"createAttributeNS\",\n    value: function createAttributeNS(namespace, name) {\n      if (namespace === undefined) {\n        namespace = null;\n      }\n\n      namespace = namespace !== null ? String(namespace) : namespace;\n      var extracted = validateAndExtract(this._globalObject, namespace, name);\n      return this._createAttribute({\n        namespace: extracted.namespace,\n        namespacePrefix: extracted.prefix,\n        localName: extracted.localName\n      });\n    } // Using this helper function rather than directly calling generatedAttr.createImpl may be preferred in some files,\n    // to avoid introducing a potentially cyclic dependency on generated/Attr.js.\n\n  }, {\n    key: \"_createAttribute\",\n    value: function _createAttribute(_ref) {\n      var localName = _ref.localName,\n          value = _ref.value,\n          namespace = _ref.namespace,\n          namespacePrefix = _ref.namespacePrefix;\n      return generatedAttr.createImpl(this._globalObject, [], {\n        localName: localName,\n        value: value,\n        namespace: namespace,\n        namespacePrefix: namespacePrefix,\n        ownerDocument: this\n      });\n    }\n  }, {\n    key: \"createTreeWalker\",\n    value: function createTreeWalker(root, whatToShow, filter) {\n      return TreeWalker.createImpl(this._globalObject, [], {\n        root: root,\n        whatToShow: whatToShow,\n        filter: filter\n      });\n    }\n  }, {\n    key: \"createNodeIterator\",\n    value: function createNodeIterator(root, whatToShow, filter) {\n      var nodeIterator = NodeIterator.createImpl(this._globalObject, [], {\n        root: root,\n        whatToShow: whatToShow,\n        filter: filter\n      });\n\n      if (hasWeakRefs) {\n        this._workingNodeIterators.add(nodeIterator);\n      } else {\n        this._workingNodeIterators.push(nodeIterator);\n\n        while (this._workingNodeIterators.length > 10) {\n          var toInactivate = this._workingNodeIterators.shift();\n\n          toInactivate._working = false;\n        }\n      }\n\n      return nodeIterator;\n    }\n  }, {\n    key: \"importNode\",\n    value: function importNode(node, deep) {\n      if (node.nodeType === NODE_TYPE.DOCUMENT_NODE) {\n        throw DOMException.create(this._globalObject, [\"Cannot import a document node\", \"NotSupportedError\"]);\n      } else if (ShadowRoot.isImpl(node)) {\n        throw DOMException.create(this._globalObject, [\"Cannot adopt a shadow root\", \"NotSupportedError\"]);\n      }\n\n      return clone(node, this, deep);\n    } // https://dom.spec.whatwg.org/#dom-document-adoptnode\n\n  }, {\n    key: \"adoptNode\",\n    value: function adoptNode(node) {\n      if (node.nodeType === NODE_TYPE.DOCUMENT_NODE) {\n        throw DOMException.create(this._globalObject, [\"Cannot adopt a document node\", \"NotSupportedError\"]);\n      } else if (ShadowRoot.isImpl(node)) {\n        throw DOMException.create(this._globalObject, [\"Cannot adopt a shadow root\", \"HierarchyRequestError\"]);\n      }\n\n      this._adoptNode(node);\n\n      return node;\n    } // https://dom.spec.whatwg.org/#concept-node-adopt\n\n  }, {\n    key: \"_adoptNode\",\n    value: function _adoptNode(node) {\n      var newDocument = this;\n      var oldDocument = node._ownerDocument;\n      var parent = domSymbolTree.parent(node);\n\n      if (parent) {\n        parent._remove(node);\n      }\n\n      if (oldDocument !== newDocument) {\n        var _iterator4 = _createForOfIteratorHelper(shadowIncludingInclusiveDescendantsIterator(node)),\n            _step4;\n\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var inclusiveDescendant = _step4.value;\n            inclusiveDescendant._ownerDocument = newDocument;\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n\n        var _iterator5 = _createForOfIteratorHelper(shadowIncludingInclusiveDescendantsIterator(node)),\n            _step5;\n\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var _inclusiveDescendant = _step5.value;\n\n            if (_inclusiveDescendant._ceState === \"custom\") {\n              enqueueCECallbackReaction(_inclusiveDescendant, \"adoptedCallback\", [idlUtils.wrapperForImpl(oldDocument), idlUtils.wrapperForImpl(newDocument)]);\n            }\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n\n        var _iterator6 = _createForOfIteratorHelper(shadowIncludingInclusiveDescendantsIterator(node)),\n            _step6;\n\n        try {\n          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n            var _inclusiveDescendant2 = _step6.value;\n\n            if (_inclusiveDescendant2._adoptingSteps) {\n              _inclusiveDescendant2._adoptingSteps(oldDocument);\n            }\n          }\n        } catch (err) {\n          _iterator6.e(err);\n        } finally {\n          _iterator6.f();\n        }\n      }\n    }\n  }, {\n    key: \"cookie\",\n    get: function get() {\n      return this._cookieJar.getCookieStringSync(this.URL, {\n        http: false\n      });\n    },\n    set: function set(cookieStr) {\n      cookieStr = String(cookieStr);\n\n      this._cookieJar.setCookieSync(cookieStr, this.URL, {\n        http: false,\n        ignoreError: true\n      });\n    } // The clear(), captureEvents(), and releaseEvents() methods must do nothing\n\n  }, {\n    key: \"clear\",\n    value: function clear() {}\n  }, {\n    key: \"captureEvents\",\n    value: function captureEvents() {}\n  }, {\n    key: \"releaseEvents\",\n    value: function releaseEvents() {}\n  }, {\n    key: \"styleSheets\",\n    get: function get() {\n      if (!this._styleSheets) {\n        this._styleSheets = StyleSheetList.createImpl(this._globalObject);\n      } // TODO: each style and link element should register its sheet on creation\n      // and remove it on removal.\n\n\n      return this._styleSheets;\n    }\n  }, {\n    key: \"hidden\",\n    get: function get() {\n      if (this._defaultView && this._defaultView._pretendToBeVisual) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"visibilityState\",\n    get: function get() {\n      if (this._defaultView && this._defaultView._pretendToBeVisual) {\n        return \"visible\";\n      }\n\n      return \"prerender\";\n    } // https://w3c.github.io/selection-api/#extensions-to-document-interface\n\n  }, {\n    key: \"getSelection\",\n    value: function getSelection() {\n      return this._defaultView ? this._defaultView._selection : null;\n    } // Needed to ensure that the resulting document has the correct prototype chain:\n    // https://dom.spec.whatwg.org/#concept-node-clone says \"that implements the same interfaces as node\".\n\n  }, {\n    key: \"_cloneDocument\",\n    value: function _cloneDocument() {\n      var copy = documents.createImpl(this._globalObject, {\n        contentType: this.contentType,\n        encoding: this._encoding,\n        parsingMode: this._parsingMode\n      });\n      copy._URL = this._URL;\n      copy._origin = this._origin;\n      return copy;\n    }\n  }]);\n\n  return DocumentImpl;\n}(NodeImpl);\n\neventAccessors.createEventAccessor(DocumentImpl.prototype, \"readystatechange\");\nmixin(DocumentImpl.prototype, DocumentOrShadowRootImpl.prototype);\nmixin(DocumentImpl.prototype, GlobalEventHandlersImpl.prototype);\nmixin(DocumentImpl.prototype, NonElementParentNodeImpl.prototype);\nmixin(DocumentImpl.prototype, ParentNodeImpl.prototype);\nDocumentImpl.prototype.getElementsByTagName = memoizeQuery(function (qualifiedName) {\n  return listOfElementsWithQualifiedName(qualifiedName, this);\n});\nDocumentImpl.prototype.getElementsByTagNameNS = memoizeQuery(function (namespace, localName) {\n  return listOfElementsWithNamespaceAndLocalName(namespace, localName, this);\n});\nDocumentImpl.prototype.getElementsByClassName = memoizeQuery(function getElementsByClassName(classNames) {\n  return listOfElementsWithClassNames(classNames, this);\n});\nmodule.exports = {\n  implementation: DocumentImpl\n};","map":{"version":3,"sources":["/Users/samehrlich/Desktop/final-app/node_modules/jsdom/lib/jsdom/living/nodes/Document-impl.js"],"names":["require","CookieJar","NodeImpl","implementation","idlUtils","NODE_TYPE","hasWeakRefs","mixin","memoizeQuery","firstChildWithLocalName","firstChildWithLocalNames","firstDescendantWithLocalName","whatwgURL","StyleSheetList","domSymbolTree","eventAccessors","asciiLowercase","stripAndCollapseASCIIWhitespace","childTextContent","HTML_NS","SVG_NS","DOMException","parseIntoDocument","History","Location","HTMLCollection","NodeList","validateName","name","validateAndExtract","fireAnEvent","shadowIncludingInclusiveDescendantsIterator","enqueueCECallbackReaction","createElement","internalCreateElementNSSteps","IterableWeakSet","DocumentOrShadowRootImpl","GlobalEventHandlersImpl","NonElementParentNodeImpl","ParentNodeImpl","clone","listOfElementsWithQualifiedName","listOfElementsWithNamespaceAndLocalName","listOfElementsWithClassNames","generatedAttr","Comment","ProcessingInstruction","CDATASection","Text","DocumentFragment","DOMImplementation","TreeWalker","NodeIterator","ShadowRoot","Range","documents","CustomEvent","ErrorEvent","Event","FocusEvent","HashChangeEvent","KeyboardEvent","MessageEvent","MouseEvent","PopStateEvent","ProgressEvent","TouchEvent","UIEvent","RequestManager","AsyncResourceQueue","ResourceQueue","PerDocumentResourceLoader","clearChildNodes","node","child","firstChild","removeChild","pad","number","toLastModifiedString","date","getMonth","getDate","getFullYear","getHours","getMinutes","getSeconds","eventInterfaceTable","customevent","errorevent","event","events","focusevent","hashchangeevent","htmlevents","keyboardevent","messageevent","mouseevent","mouseevents","popstateevent","progressevent","svgevents","touchevent","uievent","uievents","DocumentImpl","globalObject","args","privateData","_initGlobalEvents","_ownerDocument","nodeType","DOCUMENT_NODE","options","parsingMode","encoding","contentType","_parsingMode","_implementation","createImpl","_globalObject","ownerDocument","_defaultView","defaultView","_global","global","_ids","Object","create","_attached","_currentScript","_pageShowingFlag","_cookieJar","cookieJar","_parseOptions","parseOptions","_scriptingDisabled","scriptingDisabled","undefined","looseMode","scriptingEnabled","_encoding","urlOption","url","parsed","parseURL","TypeError","_URL","_origin","parentOrigin","serializeURLOrigin","_location","relevantDocument","_history","window","document","actAsIfLocationReloadCalled","reload","_workingNodeIterators","_referrer","referrer","_lastModified","lastModified","Date","_asyncQueue","_queue","asyncQueue","paused","_deferQueue","_requestManager","_currentDocumentReadiness","readyState","_lastFocusedElement","_resourceLoader","_latestEntry","_throwOnDynamicMarkupInsertionCounter","type","implForWrapper","doctype","childrenIterator","childNode","DOCUMENT_TYPE_NODE","serializeURL","ELEMENT_NODE","state","Boolean","parent","tagName","styleSheets","_remove","sheet","text","i","length","_writeAfterElement","tempDiv","innerHTML","previous","parentNode","nextSibling","_isMovingDueToDocumentWrite","insertBefore","lastChild","write","id","matchElement","find","candidate","root","getElementsByTagName","embeds","element","query","treeToArray","filter","_localName","hasAttributeNS","_namespaceURI","_modified","noQueue","bubbles","resume","dummyPromise","Promise","resolve","onDOMContentLoad","doc","dispatchEvent","tail","setListener","onLoad","count","push","elementName","getAttributeNS","documentElement","value","svgTitleElement","titleElement","createElementNS","_insert","textContent","headElement","head","_append","dir","Set","bodyElement","body","_replace","oldNode","activeElement","activeNodeIterator","_preRemovingSteps","typeLower","toLowerCase","eventWrapper","impl","_initializedFlag","start","offset","end","target","data","includes","localName","isValue","is","namespace","qualifiedName","_createAttribute","String","extracted","namespacePrefix","prefix","whatToShow","nodeIterator","add","toInactivate","shift","_working","deep","isImpl","_adoptNode","newDocument","oldDocument","inclusiveDescendant","_ceState","wrapperForImpl","_adoptingSteps","getCookieStringSync","URL","http","cookieStr","setCookieSync","ignoreError","_styleSheets","_pretendToBeVisual","_selection","copy","createEventAccessor","prototype","getElementsByTagNameNS","getElementsByClassName","classNames","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\n\nconst { CookieJar } = require(\"tough-cookie\");\n\nconst NodeImpl = require(\"./Node-impl\").implementation;\nconst idlUtils = require(\"../generated/utils\");\nconst NODE_TYPE = require(\"../node-type\");\nconst { hasWeakRefs, mixin, memoizeQuery } = require(\"../../utils\");\nconst { firstChildWithLocalName, firstChildWithLocalNames, firstDescendantWithLocalName } =\n  require(\"../helpers/traversal\");\nconst whatwgURL = require(\"whatwg-url\");\nconst StyleSheetList = require(\"../generated/StyleSheetList.js\");\nconst { domSymbolTree } = require(\"../helpers/internal-constants\");\nconst eventAccessors = require(\"../helpers/create-event-accessor\");\nconst { asciiLowercase, stripAndCollapseASCIIWhitespace } = require(\"../helpers/strings\");\nconst { childTextContent } = require(\"../helpers/text\");\nconst { HTML_NS, SVG_NS } = require(\"../helpers/namespaces\");\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\nconst { parseIntoDocument } = require(\"../../browser/parser\");\nconst History = require(\"../generated/History\");\nconst Location = require(\"../generated/Location\");\nconst HTMLCollection = require(\"../generated/HTMLCollection\");\nconst NodeList = require(\"../generated/NodeList\");\nconst validateName = require(\"../helpers/validate-names\").name;\nconst { validateAndExtract } = require(\"../helpers/validate-names\");\nconst { fireAnEvent } = require(\"../helpers/events\");\nconst { shadowIncludingInclusiveDescendantsIterator } = require(\"../helpers/shadow-dom\");\nconst { enqueueCECallbackReaction } = require(\"../helpers/custom-elements\");\nconst { createElement, internalCreateElementNSSteps } = require(\"../helpers/create-element\");\nconst IterableWeakSet = require(\"../helpers/iterable-weak-set\");\n\nconst DocumentOrShadowRootImpl = require(\"./DocumentOrShadowRoot-impl\").implementation;\nconst GlobalEventHandlersImpl = require(\"./GlobalEventHandlers-impl\").implementation;\nconst NonElementParentNodeImpl = require(\"./NonElementParentNode-impl\").implementation;\nconst ParentNodeImpl = require(\"./ParentNode-impl\").implementation;\n\nconst { clone, listOfElementsWithQualifiedName, listOfElementsWithNamespaceAndLocalName,\n  listOfElementsWithClassNames } = require(\"../node\");\nconst generatedAttr = require(\"../generated/Attr\");\nconst Comment = require(\"../generated/Comment\");\nconst ProcessingInstruction = require(\"../generated/ProcessingInstruction\");\nconst CDATASection = require(\"../generated/CDATASection\");\nconst Text = require(\"../generated/Text\");\nconst DocumentFragment = require(\"../generated/DocumentFragment\");\nconst DOMImplementation = require(\"../generated/DOMImplementation\");\nconst TreeWalker = require(\"../generated/TreeWalker\");\nconst NodeIterator = require(\"../generated/NodeIterator\");\nconst ShadowRoot = require(\"../generated/ShadowRoot\");\nconst Range = require(\"../generated/Range\");\nconst documents = require(\"../documents.js\");\n\nconst CustomEvent = require(\"../generated/CustomEvent\");\nconst ErrorEvent = require(\"../generated/ErrorEvent\");\nconst Event = require(\"../generated/Event\");\nconst FocusEvent = require(\"../generated/FocusEvent\");\nconst HashChangeEvent = require(\"../generated/HashChangeEvent\");\nconst KeyboardEvent = require(\"../generated/KeyboardEvent\");\nconst MessageEvent = require(\"../generated/MessageEvent\");\nconst MouseEvent = require(\"../generated/MouseEvent\");\nconst PopStateEvent = require(\"../generated/PopStateEvent\");\nconst ProgressEvent = require(\"../generated/ProgressEvent\");\nconst TouchEvent = require(\"../generated/TouchEvent\");\nconst UIEvent = require(\"../generated/UIEvent\");\n\nconst RequestManager = require(\"../../browser/resources/request-manager\");\nconst AsyncResourceQueue = require(\"../../browser/resources/async-resource-queue\");\nconst ResourceQueue = require(\"../../browser/resources/resource-queue\");\nconst PerDocumentResourceLoader = require(\"../../browser/resources/per-document-resource-loader\");\n\nfunction clearChildNodes(node) {\n  for (let child = domSymbolTree.firstChild(node); child; child = domSymbolTree.firstChild(node)) {\n    node.removeChild(child);\n  }\n}\n\nfunction pad(number) {\n  if (number < 10) {\n    return \"0\" + number;\n  }\n  return number;\n}\n\nfunction toLastModifiedString(date) {\n  return pad(date.getMonth() + 1) +\n    \"/\" + pad(date.getDate()) +\n    \"/\" + date.getFullYear() +\n    \" \" + pad(date.getHours()) +\n    \":\" + pad(date.getMinutes()) +\n    \":\" + pad(date.getSeconds());\n}\n\nconst eventInterfaceTable = {\n  customevent: CustomEvent,\n  errorevent: ErrorEvent,\n  event: Event,\n  events: Event,\n  focusevent: FocusEvent,\n  hashchangeevent: HashChangeEvent,\n  htmlevents: Event,\n  keyboardevent: KeyboardEvent,\n  messageevent: MessageEvent,\n  mouseevent: MouseEvent,\n  mouseevents: MouseEvent,\n  popstateevent: PopStateEvent,\n  progressevent: ProgressEvent,\n  svgevents: Event,\n  touchevent: TouchEvent,\n  uievent: UIEvent,\n  uievents: UIEvent\n};\n\nclass DocumentImpl extends NodeImpl {\n  constructor(globalObject, args, privateData) {\n    super(globalObject, args, privateData);\n\n    this._initGlobalEvents();\n\n    this._ownerDocument = this;\n    this.nodeType = NODE_TYPE.DOCUMENT_NODE;\n    if (!privateData.options) {\n      privateData.options = {};\n    }\n    if (!privateData.options.parsingMode) {\n      privateData.options.parsingMode = \"xml\";\n    }\n    if (!privateData.options.encoding) {\n      privateData.options.encoding = \"UTF-8\";\n    }\n    if (!privateData.options.contentType) {\n      privateData.options.contentType = privateData.options.parsingMode === \"xml\" ? \"application/xml\" : \"text/html\";\n    }\n\n    this._parsingMode = privateData.options.parsingMode;\n\n    this._implementation = DOMImplementation.createImpl(this._globalObject, [], {\n      ownerDocument: this\n    });\n\n    this._defaultView = privateData.options.defaultView || null;\n    this._global = privateData.options.global;\n    this._ids = Object.create(null);\n    this._attached = true;\n    this._currentScript = null;\n    this._pageShowingFlag = false;\n    this._cookieJar = privateData.options.cookieJar;\n    this._parseOptions = privateData.options.parseOptions || {};\n    this._scriptingDisabled = privateData.options.scriptingDisabled;\n    if (this._cookieJar === undefined) {\n      this._cookieJar = new CookieJar(null, { looseMode: true });\n    }\n\n    if (this._scriptingDisabled) {\n      this._parseOptions.scriptingEnabled = false;\n    }\n\n    this.contentType = privateData.options.contentType;\n    this._encoding = privateData.options.encoding;\n\n    const urlOption = privateData.options.url === undefined ? \"about:blank\" : privateData.options.url;\n    const parsed = whatwgURL.parseURL(urlOption);\n    if (parsed === null) {\n      throw new TypeError(`Could not parse \"${urlOption}\" as a URL`);\n    }\n\n    this._URL = parsed;\n    this._origin = urlOption === \"about:blank\" && privateData.options.parentOrigin ?\n      privateData.options.parentOrigin :\n      whatwgURL.serializeURLOrigin(this._URL);\n\n    this._location = Location.createImpl(this._globalObject, [], { relevantDocument: this });\n    this._history = History.createImpl(this._globalObject, [], {\n      window: this._defaultView,\n      document: this,\n      actAsIfLocationReloadCalled: () => this._location.reload()\n    });\n\n    if (hasWeakRefs) {\n      this._workingNodeIterators = new IterableWeakSet();\n    } else {\n      this._workingNodeIterators = [];\n    }\n\n    this._referrer = privateData.options.referrer || \"\";\n    this._lastModified = toLastModifiedString(privateData.options.lastModified || new Date());\n    this._asyncQueue = new AsyncResourceQueue();\n    this._queue = new ResourceQueue({ asyncQueue: this._asyncQueue, paused: false });\n    this._deferQueue = new ResourceQueue({ paused: true });\n    this._requestManager = new RequestManager();\n    this._currentDocumentReadiness = privateData.options.readyState || \"loading\";\n\n    this._lastFocusedElement = null;\n\n    this._resourceLoader = new PerDocumentResourceLoader(this);\n\n    // Each Document in a browsing context can also have a latest entry. This is the entry for that Document\n    // to which the browsing context's session history was most recently traversed. When a Document is created,\n    // it initially has no latest entry.\n    this._latestEntry = null;\n\n    // https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#throw-on-dynamic-markup-insertion-counter\n    this._throwOnDynamicMarkupInsertionCounter = 0;\n  }\n\n  _getTheParent(event) {\n    if (event.type === \"load\" || !this._defaultView) {\n      return null;\n    }\n\n    return idlUtils.implForWrapper(this._defaultView);\n  }\n\n  get compatMode() {\n    return this._parsingMode === \"xml\" || this.doctype ? \"CSS1Compat\" : \"BackCompat\";\n  }\n  get charset() {\n    return this._encoding;\n  }\n  get characterSet() {\n    return this._encoding;\n  }\n  get inputEncoding() {\n    return this._encoding;\n  }\n  get doctype() {\n    for (const childNode of domSymbolTree.childrenIterator(this)) {\n      if (childNode.nodeType === NODE_TYPE.DOCUMENT_TYPE_NODE) {\n        return childNode;\n      }\n    }\n    return null;\n  }\n  get URL() {\n    return whatwgURL.serializeURL(this._URL);\n  }\n  get documentURI() {\n    return whatwgURL.serializeURL(this._URL);\n  }\n  get location() {\n    return this._defaultView ? this._location : null;\n  }\n\n  // https://dom.spec.whatwg.org/#dom-document-documentelement\n  get documentElement() {\n    for (const childNode of domSymbolTree.childrenIterator(this)) {\n      if (childNode.nodeType === NODE_TYPE.ELEMENT_NODE) {\n        return childNode;\n      }\n    }\n\n    return null;\n  }\n\n  get implementation() {\n    return this._implementation;\n  }\n  set implementation(implementation) {\n    this._implementation = implementation;\n  }\n\n  get defaultView() {\n    return this._defaultView;\n  }\n\n  get currentScript() {\n    return this._currentScript;\n  }\n\n  get readyState() {\n    return this._currentDocumentReadiness;\n  }\n\n  set readyState(state) {\n    this._currentDocumentReadiness = state;\n    fireAnEvent(\"readystatechange\", this);\n  }\n\n  hasFocus() {\n    return Boolean(this._lastFocusedElement);\n  }\n\n  _descendantRemoved(parent, child) {\n    if (child.tagName === \"STYLE\") {\n      this.styleSheets._remove(child.sheet);\n    }\n\n    super._descendantRemoved(parent, child);\n  }\n\n  write(...args) {\n    let text = \"\";\n    for (let i = 0; i < args.length; ++i) {\n      text += args[i];\n    }\n\n    if (this._parsingMode === \"xml\") {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot use document.write on XML documents\",\n        \"InvalidStateError\"\n      ]);\n    }\n\n    if (this._throwOnDynamicMarkupInsertionCounter > 0) {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot use document.write while a custom element upgrades\",\n        \"InvalidStateError\"\n      ]);\n    }\n\n    if (this._writeAfterElement) {\n      // If called from an script element directly (during the first tick),\n      // the new elements are inserted right after that element.\n      const tempDiv = this.createElement(\"div\");\n      tempDiv.innerHTML = text;\n\n      let child = tempDiv.firstChild;\n      let previous = this._writeAfterElement;\n      const parent = this._writeAfterElement.parentNode;\n\n      while (child) {\n        const node = child;\n        child = child.nextSibling;\n\n        node._isMovingDueToDocumentWrite = true; // hack for script execution\n        parent.insertBefore(node, previous.nextSibling);\n        node._isMovingDueToDocumentWrite = false;\n\n        previous = node;\n      }\n    } else if (this.readyState === \"loading\") {\n      // During page loading, document.write appends to the current element\n      // Find the last child that has been added to the document.\n      if (this.lastChild) {\n        let node = this;\n        while (node.lastChild && node.lastChild.nodeType === NODE_TYPE.ELEMENT_NODE) {\n          node = node.lastChild;\n        }\n        node.innerHTML = text;\n      } else {\n        clearChildNodes(this);\n        parseIntoDocument(text, this);\n      }\n    } else if (text) {\n      clearChildNodes(this);\n      parseIntoDocument(text, this);\n    }\n  }\n\n  writeln(...args) {\n    this.write(...args, \"\\n\");\n  }\n\n  // This is implemented separately for Document (which has a _ids cache) and DocumentFragment (which does not).\n  getElementById(id) {\n    if (!this._ids[id]) {\n      return null;\n    }\n\n    // Let's find the first element with where it's root is the document.\n    const matchElement = this._ids[id].find(candidate => {\n      let root = candidate;\n      while (domSymbolTree.parent(root)) {\n        root = domSymbolTree.parent(root);\n      }\n\n      return root === this;\n    });\n\n    return matchElement || null;\n  }\n\n  get referrer() {\n    return this._referrer || \"\";\n  }\n  get lastModified() {\n    return this._lastModified;\n  }\n  get images() {\n    return this.getElementsByTagName(\"IMG\");\n  }\n  get embeds() {\n    return this.getElementsByTagName(\"EMBED\");\n  }\n  get plugins() {\n    return this.embeds;\n  }\n  get links() {\n    return HTMLCollection.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => domSymbolTree.treeToArray(this, {\n        filter: node => (node._localName === \"a\" || node._localName === \"area\") &&\n                        node.hasAttributeNS(null, \"href\") &&\n                        node._namespaceURI === HTML_NS\n      })\n    });\n  }\n  get forms() {\n    return this.getElementsByTagName(\"FORM\");\n  }\n  get scripts() {\n    return this.getElementsByTagName(\"SCRIPT\");\n  }\n  get anchors() {\n    return HTMLCollection.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => domSymbolTree.treeToArray(this, {\n        filter: node => node._localName === \"a\" &&\n                        node.hasAttributeNS(null, \"name\") &&\n                        node._namespaceURI === HTML_NS\n      })\n    });\n  }\n\n  // The applets attribute must return an\n  // HTMLCollection rooted at the Document node,\n  // whose filter matches nothing.\n  // (It exists for historical reasons.)\n  get applets() {\n    return HTMLCollection.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => []\n    });\n  }\n\n  open() {\n    let child = domSymbolTree.firstChild(this);\n    while (child) {\n      this.removeChild(child);\n      child = domSymbolTree.firstChild(this);\n    }\n    this._modified();\n    return this;\n  }\n  close(noQueue) {\n    // In some cases like when creating an empty iframe, I want to emit the\n    // events right away to avoid problems if later I asign the property src.\n    if (noQueue) {\n      this.readyState = \"complete\";\n\n      fireAnEvent(\"DOMContentLoaded\", this, undefined, { bubbles: true });\n      fireAnEvent(\"load\", this);\n\n      return;\n    }\n    this._queue.resume();\n\n    const dummyPromise = Promise.resolve();\n\n    const onDOMContentLoad = () => {\n      const doc = this;\n      function dispatchEvent() {\n        // https://html.spec.whatwg.org/#the-end\n        doc.readyState = \"interactive\";\n        fireAnEvent(\"DOMContentLoaded\", doc, undefined, { bubbles: true });\n      }\n\n      return new Promise(resolve => {\n        if (!this._deferQueue.tail) {\n          dispatchEvent();\n          resolve();\n          return;\n        }\n\n        this._deferQueue.setListener(() => {\n          dispatchEvent();\n          resolve();\n        });\n\n        this._deferQueue.resume();\n      });\n    };\n\n    const onLoad = () => {\n      const doc = this;\n      function dispatchEvent() {\n        doc.readyState = \"complete\";\n        fireAnEvent(\"load\", doc);\n      }\n\n      return new Promise(resolve => {\n        if (this._asyncQueue.count() === 0) {\n          dispatchEvent();\n          resolve();\n          return;\n        }\n\n        this._asyncQueue.setListener(() => {\n          dispatchEvent();\n          resolve();\n        });\n      });\n    };\n\n    this._queue.push(dummyPromise, onDOMContentLoad, null);\n    // Set the readyState to 'complete' once all resources are loaded.\n    // As a side-effect the document's load-event will be dispatched.\n    this._queue.push(dummyPromise, onLoad, null, true);\n  }\n\n  getElementsByName(elementName) {\n    return NodeList.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => domSymbolTree.treeToArray(this, {\n        filter: node => node.getAttributeNS && node.getAttributeNS(null, \"name\") === elementName\n      })\n    });\n  }\n\n  get title() {\n    const { documentElement } = this;\n    let value = \"\";\n\n    if (documentElement && documentElement._localName === \"svg\") {\n      const svgTitleElement = firstChildWithLocalName(documentElement, \"title\", SVG_NS);\n\n      if (svgTitleElement) {\n        value = childTextContent(svgTitleElement);\n      }\n    } else {\n      const titleElement = firstDescendantWithLocalName(this, \"title\");\n\n      if (titleElement) {\n        value = childTextContent(titleElement);\n      }\n    }\n\n    value = stripAndCollapseASCIIWhitespace(value);\n\n    return value;\n  }\n\n  set title(value) {\n    const { documentElement } = this;\n    let element;\n\n    if (documentElement && documentElement._localName === \"svg\") {\n      element = firstChildWithLocalName(documentElement, \"title\", SVG_NS);\n\n      if (!element) {\n        element = this.createElementNS(SVG_NS, \"title\");\n\n        this._insert(element, documentElement.firstChild);\n      }\n\n      element.textContent = value;\n    } else if (documentElement && documentElement._namespaceURI === HTML_NS) {\n      const titleElement = firstDescendantWithLocalName(this, \"title\");\n      const headElement = this.head;\n\n      if (titleElement === null && headElement === null) {\n        return;\n      }\n\n      if (titleElement !== null) {\n        element = titleElement;\n      } else {\n        element = this.createElement(\"title\");\n        headElement._append(element);\n      }\n\n      element.textContent = value;\n    }\n  }\n\n  get dir() {\n    return this.documentElement ? this.documentElement.dir : \"\";\n  }\n  set dir(value) {\n    if (this.documentElement) {\n      this.documentElement.dir = value;\n    }\n  }\n\n  get head() {\n    return this.documentElement ? firstChildWithLocalName(this.documentElement, \"head\") : null;\n  }\n\n  get body() {\n    const { documentElement } = this;\n    if (!documentElement || documentElement._localName !== \"html\" ||\n        documentElement._namespaceURI !== HTML_NS) {\n      return null;\n    }\n\n    return firstChildWithLocalNames(this.documentElement, new Set([\"body\", \"frameset\"]));\n  }\n\n  set body(value) {\n    if (value === null ||\n        value._namespaceURI !== HTML_NS ||\n        (value._localName !== \"body\" && value._localName !== \"frameset\")) {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot set the body to null or a non-body/frameset element\",\n        \"HierarchyRequestError\"\n      ]);\n    }\n\n    const bodyElement = this.body;\n    if (value === bodyElement) {\n      return;\n    }\n\n    if (bodyElement !== null) {\n      bodyElement.parentNode._replace(value, bodyElement);\n      return;\n    }\n\n    const { documentElement } = this;\n    if (documentElement === null) {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot set the body when there is no document element\",\n        \"HierarchyRequestError\"\n      ]);\n    }\n\n    documentElement._append(value);\n  }\n\n  _runPreRemovingSteps(oldNode) {\n    // https://html.spec.whatwg.org/#focus-fixup-rule\n    if (oldNode === this.activeElement) {\n      this._lastFocusedElement = this.body;\n    }\n    for (const activeNodeIterator of this._workingNodeIterators) {\n      activeNodeIterator._preRemovingSteps(oldNode);\n    }\n  }\n\n  createEvent(type) {\n    const typeLower = type.toLowerCase();\n    const eventWrapper = eventInterfaceTable[typeLower] || null;\n\n    if (!eventWrapper) {\n      throw DOMException.create(this._globalObject, [\n        \"The provided event type (\\\"\" + type + \"\\\") is invalid\",\n        \"NotSupportedError\"\n      ]);\n    }\n\n    const impl = eventWrapper.createImpl(this._globalObject, [\"\"]);\n    impl._initializedFlag = false;\n    return impl;\n  }\n\n  createRange() {\n    return Range.createImpl(this._globalObject, [], {\n      start: { node: this, offset: 0 },\n      end: { node: this, offset: 0 }\n    });\n  }\n\n  createProcessingInstruction(target, data) {\n    validateName(this._globalObject, target);\n\n    if (data.includes(\"?>\")) {\n      throw DOMException.create(this._globalObject, [\n        \"Processing instruction data cannot contain the string \\\"?>\\\"\",\n        \"InvalidCharacterError\"\n      ]);\n    }\n\n    return ProcessingInstruction.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      target,\n      data\n    });\n  }\n\n  // https://dom.spec.whatwg.org/#dom-document-createcdatasection\n  createCDATASection(data) {\n    if (this._parsingMode === \"html\") {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot create CDATA sections in HTML documents\",\n        \"NotSupportedError\"\n      ]);\n    }\n\n    if (data.includes(\"]]>\")) {\n      throw DOMException.create(this._globalObject, [\n        \"CDATA section data cannot contain the string \\\"]]>\\\"\",\n        \"InvalidCharacterError\"\n      ]);\n    }\n\n    return CDATASection.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      data\n    });\n  }\n\n  createTextNode(data) {\n    return Text.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      data\n    });\n  }\n\n  createComment(data) {\n    return Comment.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      data\n    });\n  }\n\n  // https://dom.spec.whatwg.org/#dom-document-createelement\n  createElement(localName, options) {\n    validateName(this._globalObject, localName);\n\n    if (this._parsingMode === \"html\") {\n      localName = asciiLowercase(localName);\n    }\n\n    let isValue = null;\n    if (options && options.is !== undefined) {\n      isValue = options.is;\n    }\n\n    const namespace = this._parsingMode === \"html\" || this.contentType === \"application/xhtml+xml\" ? HTML_NS : null;\n\n    return createElement(this, localName, namespace, null, isValue, true);\n  }\n\n  // https://dom.spec.whatwg.org/#dom-document-createelementns\n  createElementNS(namespace, qualifiedName, options) {\n    return internalCreateElementNSSteps(this, namespace, qualifiedName, options);\n  }\n\n  createDocumentFragment() {\n    return DocumentFragment.createImpl(this._globalObject, [], { ownerDocument: this });\n  }\n\n  createAttribute(localName) {\n    validateName(this._globalObject, localName);\n\n    if (this._parsingMode === \"html\") {\n      localName = asciiLowercase(localName);\n    }\n\n    return this._createAttribute({ localName });\n  }\n\n  createAttributeNS(namespace, name) {\n    if (namespace === undefined) {\n      namespace = null;\n    }\n    namespace = namespace !== null ? String(namespace) : namespace;\n\n    const extracted = validateAndExtract(this._globalObject, namespace, name);\n    return this._createAttribute({\n      namespace: extracted.namespace,\n      namespacePrefix: extracted.prefix,\n      localName: extracted.localName\n    });\n  }\n\n  // Using this helper function rather than directly calling generatedAttr.createImpl may be preferred in some files,\n  // to avoid introducing a potentially cyclic dependency on generated/Attr.js.\n  _createAttribute({\n    localName,\n    value,\n    namespace,\n    namespacePrefix\n  }) {\n    return generatedAttr.createImpl(this._globalObject, [], {\n      localName,\n      value,\n      namespace,\n      namespacePrefix,\n      ownerDocument: this\n    });\n  }\n\n  createTreeWalker(root, whatToShow, filter) {\n    return TreeWalker.createImpl(this._globalObject, [], { root, whatToShow, filter });\n  }\n\n  createNodeIterator(root, whatToShow, filter) {\n    const nodeIterator = NodeIterator.createImpl(this._globalObject, [], { root, whatToShow, filter });\n\n    if (hasWeakRefs) {\n      this._workingNodeIterators.add(nodeIterator);\n    } else {\n      this._workingNodeIterators.push(nodeIterator);\n      while (this._workingNodeIterators.length > 10) {\n        const toInactivate = this._workingNodeIterators.shift();\n        toInactivate._working = false;\n      }\n    }\n\n    return nodeIterator;\n  }\n\n  importNode(node, deep) {\n    if (node.nodeType === NODE_TYPE.DOCUMENT_NODE) {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot import a document node\",\n        \"NotSupportedError\"\n      ]);\n    } else if (ShadowRoot.isImpl(node)) {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot adopt a shadow root\",\n        \"NotSupportedError\"\n      ]);\n    }\n\n    return clone(node, this, deep);\n  }\n\n  // https://dom.spec.whatwg.org/#dom-document-adoptnode\n  adoptNode(node) {\n    if (node.nodeType === NODE_TYPE.DOCUMENT_NODE) {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot adopt a document node\",\n        \"NotSupportedError\"\n      ]);\n    } else if (ShadowRoot.isImpl(node)) {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot adopt a shadow root\",\n        \"HierarchyRequestError\"\n      ]);\n    }\n\n    this._adoptNode(node);\n\n    return node;\n  }\n\n  // https://dom.spec.whatwg.org/#concept-node-adopt\n  _adoptNode(node) {\n    const newDocument = this;\n    const oldDocument = node._ownerDocument;\n\n    const parent = domSymbolTree.parent(node);\n    if (parent) {\n      parent._remove(node);\n    }\n\n    if (oldDocument !== newDocument) {\n      for (const inclusiveDescendant of shadowIncludingInclusiveDescendantsIterator(node)) {\n        inclusiveDescendant._ownerDocument = newDocument;\n      }\n\n      for (const inclusiveDescendant of shadowIncludingInclusiveDescendantsIterator(node)) {\n        if (inclusiveDescendant._ceState === \"custom\") {\n          enqueueCECallbackReaction(inclusiveDescendant, \"adoptedCallback\", [\n            idlUtils.wrapperForImpl(oldDocument),\n            idlUtils.wrapperForImpl(newDocument)\n          ]);\n        }\n      }\n\n      for (const inclusiveDescendant of shadowIncludingInclusiveDescendantsIterator(node)) {\n        if (inclusiveDescendant._adoptingSteps) {\n          inclusiveDescendant._adoptingSteps(oldDocument);\n        }\n      }\n    }\n  }\n\n  get cookie() {\n    return this._cookieJar.getCookieStringSync(this.URL, { http: false });\n  }\n  set cookie(cookieStr) {\n    cookieStr = String(cookieStr);\n    this._cookieJar.setCookieSync(cookieStr, this.URL, {\n      http: false,\n      ignoreError: true\n    });\n  }\n\n  // The clear(), captureEvents(), and releaseEvents() methods must do nothing\n  clear() {}\n\n  captureEvents() {}\n\n  releaseEvents() {}\n\n  get styleSheets() {\n    if (!this._styleSheets) {\n      this._styleSheets = StyleSheetList.createImpl(this._globalObject);\n    }\n\n    // TODO: each style and link element should register its sheet on creation\n    // and remove it on removal.\n    return this._styleSheets;\n  }\n\n  get hidden() {\n    if (this._defaultView && this._defaultView._pretendToBeVisual) {\n      return false;\n    }\n\n    return true;\n  }\n\n  get visibilityState() {\n    if (this._defaultView && this._defaultView._pretendToBeVisual) {\n      return \"visible\";\n    }\n\n    return \"prerender\";\n  }\n\n  // https://w3c.github.io/selection-api/#extensions-to-document-interface\n  getSelection() {\n    return this._defaultView ? this._defaultView._selection : null;\n  }\n\n  // Needed to ensure that the resulting document has the correct prototype chain:\n  // https://dom.spec.whatwg.org/#concept-node-clone says \"that implements the same interfaces as node\".\n  _cloneDocument() {\n    const copy = documents.createImpl(\n      this._globalObject,\n      {\n        contentType: this.contentType,\n        encoding: this._encoding,\n        parsingMode: this._parsingMode\n      }\n    );\n\n    copy._URL = this._URL;\n    copy._origin = this._origin;\n    return copy;\n  }\n}\n\neventAccessors.createEventAccessor(DocumentImpl.prototype, \"readystatechange\");\nmixin(DocumentImpl.prototype, DocumentOrShadowRootImpl.prototype);\nmixin(DocumentImpl.prototype, GlobalEventHandlersImpl.prototype);\nmixin(DocumentImpl.prototype, NonElementParentNodeImpl.prototype);\nmixin(DocumentImpl.prototype, ParentNodeImpl.prototype);\n\nDocumentImpl.prototype.getElementsByTagName = memoizeQuery(function (qualifiedName) {\n  return listOfElementsWithQualifiedName(qualifiedName, this);\n});\n\nDocumentImpl.prototype.getElementsByTagNameNS = memoizeQuery(function (namespace, localName) {\n  return listOfElementsWithNamespaceAndLocalName(namespace, localName, this);\n});\n\nDocumentImpl.prototype.getElementsByClassName = memoizeQuery(function getElementsByClassName(classNames) {\n  return listOfElementsWithClassNames(classNames, this);\n});\n\nmodule.exports = {\n  implementation: DocumentImpl\n};\n"]},"metadata":{},"sourceType":"script"}