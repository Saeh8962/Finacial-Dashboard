{"ast":null,"code":"\"use strict\";\n\nvar whatwgURL = require(\"whatwg-url\");\n\nvar _require = require(\"../generated/utils\"),\n    implForWrapper = _require.implForWrapper;\n\nexports.documentBaseURL = function (document) {\n  // https://html.spec.whatwg.org/multipage/infrastructure.html#document-base-url\n  var firstBase = document.querySelector(\"base[href]\");\n  var fallbackBaseURL = exports.fallbackBaseURL(document);\n\n  if (firstBase === null) {\n    return fallbackBaseURL;\n  }\n\n  return frozenBaseURL(firstBase, fallbackBaseURL);\n};\n\nexports.documentBaseURLSerialized = function (document) {\n  return whatwgURL.serializeURL(exports.documentBaseURL(document));\n};\n\nexports.fallbackBaseURL = function (document) {\n  // https://html.spec.whatwg.org/multipage/infrastructure.html#fallback-base-url\n  // Unimplemented: <iframe srcdoc>\n  if (document.URL === \"about:blank\" && document._defaultView && document._defaultView._parent !== document._defaultView) {\n    var parentDocument = implForWrapper(document._defaultView._parent._document);\n    return exports.documentBaseURL(parentDocument);\n  }\n\n  return document._URL;\n};\n\nexports.parseURLToResultingURLRecord = function (url, document) {\n  // https://html.spec.whatwg.org/#resolve-a-url\n  // Encoding stuff ignored; always UTF-8 for us, for now.\n  var baseURL = exports.documentBaseURL(document);\n  return whatwgURL.parseURL(url, {\n    baseURL: baseURL\n  }); // This returns the resulting URL record; to get the resulting URL string, just serialize it.\n};\n\nfunction frozenBaseURL(baseElement, fallbackBaseURL) {\n  // https://html.spec.whatwg.org/multipage/semantics.html#frozen-base-url\n  // The spec is eager (setting the frozen base URL when things change); we are lazy (getting it when we need to)\n  var baseHrefAttribute = baseElement.getAttributeNS(null, \"href\");\n  var result = whatwgURL.parseURL(baseHrefAttribute, {\n    baseURL: fallbackBaseURL\n  });\n  return result === null ? fallbackBaseURL : result;\n}","map":{"version":3,"sources":["/Users/samehrlich/Desktop/final-app/node_modules/jsdom/lib/jsdom/living/helpers/document-base-url.js"],"names":["whatwgURL","require","implForWrapper","exports","documentBaseURL","document","firstBase","querySelector","fallbackBaseURL","frozenBaseURL","documentBaseURLSerialized","serializeURL","URL","_defaultView","_parent","parentDocument","_document","_URL","parseURLToResultingURLRecord","url","baseURL","parseURL","baseElement","baseHrefAttribute","getAttributeNS","result"],"mappings":"AAAA;;AACA,IAAMA,SAAS,GAAGC,OAAO,CAAC,YAAD,CAAzB;;AACA,eAA2BA,OAAO,CAAC,oBAAD,CAAlC;AAAA,IAAQC,cAAR,YAAQA,cAAR;;AAEAC,OAAO,CAACC,eAAR,GAA0B,UAAAC,QAAQ,EAAI;AACpC;AAEA,MAAMC,SAAS,GAAGD,QAAQ,CAACE,aAAT,CAAuB,YAAvB,CAAlB;AACA,MAAMC,eAAe,GAAGL,OAAO,CAACK,eAAR,CAAwBH,QAAxB,CAAxB;;AAEA,MAAIC,SAAS,KAAK,IAAlB,EAAwB;AACtB,WAAOE,eAAP;AACD;;AAED,SAAOC,aAAa,CAACH,SAAD,EAAYE,eAAZ,CAApB;AACD,CAXD;;AAaAL,OAAO,CAACO,yBAAR,GAAoC,UAAAL,QAAQ,EAAI;AAC9C,SAAOL,SAAS,CAACW,YAAV,CAAuBR,OAAO,CAACC,eAAR,CAAwBC,QAAxB,CAAvB,CAAP;AACD,CAFD;;AAIAF,OAAO,CAACK,eAAR,GAA0B,UAAAH,QAAQ,EAAI;AACpC;AAEA;AAEA,MAAIA,QAAQ,CAACO,GAAT,KAAiB,aAAjB,IAAkCP,QAAQ,CAACQ,YAA3C,IACAR,QAAQ,CAACQ,YAAT,CAAsBC,OAAtB,KAAkCT,QAAQ,CAACQ,YAD/C,EAC6D;AAC3D,QAAME,cAAc,GAAGb,cAAc,CAACG,QAAQ,CAACQ,YAAT,CAAsBC,OAAtB,CAA8BE,SAA/B,CAArC;AACA,WAAOb,OAAO,CAACC,eAAR,CAAwBW,cAAxB,CAAP;AACD;;AAED,SAAOV,QAAQ,CAACY,IAAhB;AACD,CAZD;;AAcAd,OAAO,CAACe,4BAAR,GAAuC,UAACC,GAAD,EAAMd,QAAN,EAAmB;AACxD;AAEA;AAEA,MAAMe,OAAO,GAAGjB,OAAO,CAACC,eAAR,CAAwBC,QAAxB,CAAhB;AAEA,SAAOL,SAAS,CAACqB,QAAV,CAAmBF,GAAnB,EAAwB;AAAEC,IAAAA,OAAO,EAAPA;AAAF,GAAxB,CAAP,CAPwD,CAQxD;AACD,CATD;;AAWA,SAASX,aAAT,CAAuBa,WAAvB,EAAoCd,eAApC,EAAqD;AACnD;AACA;AAEA,MAAMe,iBAAiB,GAAGD,WAAW,CAACE,cAAZ,CAA2B,IAA3B,EAAiC,MAAjC,CAA1B;AACA,MAAMC,MAAM,GAAGzB,SAAS,CAACqB,QAAV,CAAmBE,iBAAnB,EAAsC;AAAEH,IAAAA,OAAO,EAAEZ;AAAX,GAAtC,CAAf;AACA,SAAOiB,MAAM,KAAK,IAAX,GAAkBjB,eAAlB,GAAoCiB,MAA3C;AACD","sourcesContent":["\"use strict\";\nconst whatwgURL = require(\"whatwg-url\");\nconst { implForWrapper } = require(\"../generated/utils\");\n\nexports.documentBaseURL = document => {\n  // https://html.spec.whatwg.org/multipage/infrastructure.html#document-base-url\n\n  const firstBase = document.querySelector(\"base[href]\");\n  const fallbackBaseURL = exports.fallbackBaseURL(document);\n\n  if (firstBase === null) {\n    return fallbackBaseURL;\n  }\n\n  return frozenBaseURL(firstBase, fallbackBaseURL);\n};\n\nexports.documentBaseURLSerialized = document => {\n  return whatwgURL.serializeURL(exports.documentBaseURL(document));\n};\n\nexports.fallbackBaseURL = document => {\n  // https://html.spec.whatwg.org/multipage/infrastructure.html#fallback-base-url\n\n  // Unimplemented: <iframe srcdoc>\n\n  if (document.URL === \"about:blank\" && document._defaultView &&\n      document._defaultView._parent !== document._defaultView) {\n    const parentDocument = implForWrapper(document._defaultView._parent._document);\n    return exports.documentBaseURL(parentDocument);\n  }\n\n  return document._URL;\n};\n\nexports.parseURLToResultingURLRecord = (url, document) => {\n  // https://html.spec.whatwg.org/#resolve-a-url\n\n  // Encoding stuff ignored; always UTF-8 for us, for now.\n\n  const baseURL = exports.documentBaseURL(document);\n\n  return whatwgURL.parseURL(url, { baseURL });\n  // This returns the resulting URL record; to get the resulting URL string, just serialize it.\n};\n\nfunction frozenBaseURL(baseElement, fallbackBaseURL) {\n  // https://html.spec.whatwg.org/multipage/semantics.html#frozen-base-url\n  // The spec is eager (setting the frozen base URL when things change); we are lazy (getting it when we need to)\n\n  const baseHrefAttribute = baseElement.getAttributeNS(null, \"href\");\n  const result = whatwgURL.parseURL(baseHrefAttribute, { baseURL: fallbackBaseURL });\n  return result === null ? fallbackBaseURL : result;\n}\n"]},"metadata":{},"sourceType":"script"}