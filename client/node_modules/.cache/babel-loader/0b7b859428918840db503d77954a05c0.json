{"ast":null,"code":"import _classCallCheck from \"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/samehrlich/Desktop/final-app/client/src/profile.js\";\nimport React, { Component, ChildComponent } from \"react\";\nimport { ListGroup } from \"react-bootstrap/esm\";\nimport { Button, DropdownMenu, Dropdown } from \"reactstrap/es\";\nimport { withRouter } from \"react-router-dom\";\nimport DrawerContainer from \"./layout/DrawerContainer\";\nimport \"./CSS/GlobalCSS.css\";\nimport \"./CSS/App.css\"; // import './App.scss';\n\nimport SearchBar from './components/searchbar';\nimport WatchList from './components/WatchList';\nimport AllocationPanel from \"./panels/AllocationPanel\";\nimport PerformancePanel from \"./panels/PerformancePanel\"; // import 'react-dropdown/style.css';\n// import \"./CSS/legacyStyles.css\";\n// import { render } from \"react-dom\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar Profile = /*#__PURE__*/function (_Component) {\n  _inherits(Profile, _Component);\n\n  var _super = _createSuper(Profile);\n\n  function Profile(props) {\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    _this = _super.call(this, props);\n    _this.routeChange = _this.routeChange.bind(_assertThisInitialized(_this));\n\n    if (_this.props.location.state == null || _this.props.location.state[0] == null || _this.props.location.state[0][0] == null || _this.props.location.state[1] == null) {\n      _this.props.history.push(\"/error\");\n    } else {\n      _this.state = {\n        email: _this.props.location.state[0][0].email,\n        stocks: _this.props.location.state[1],\n        stock_to_watch: \"\",\n        dropdownOpen: false,\n        value: \"Your Watchlist\"\n      };\n    }\n\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevProps.location.state[0][0].getStocks === undefined && this.props.location.state[0][0].getStocks === true) {\n        console.log('User has added a stock. Get new stocks');\n        this.getUserStocks();\n      }\n    }\n  }, {\n    key: \"getUserStocks\",\n    value: function getUserStocks() {\n      var _this2 = this;\n\n      var user = {\n        email: this.state.email\n      };\n      console.log(user);\n      var url = \"/api/getUserStocks\";\n      var req = new Request(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(user)\n      });\n      fetch(req).then(function (res) {\n        return res.json();\n      }).catch(function (error) {\n        console.log(\"p/121\");\n        console.log(error);\n        return Promise.reject(error);\n      }).then(function (stock_results) {\n        console.log(\"3rdt ADD/remove Stock Rerender\");\n\n        _this2.setState({\n          stocks: stock_results\n        }, function () {\n          return _this2.props.history.push(\"/profile\", [[{\n            email: _this2.state.email\n          }, _this2.state.stocks]]);\n        });\n      });\n    }\n  }, {\n    key: \"routeChange\",\n    value: function routeChange(value) {\n      if (value.target.id == \"Back\") {\n        this.props.history.push(\"/\", this.props.history.location.state);\n      } else if (value.target.id == \"Home\") {\n        this.props.history.push(\"/\", this.props.history.location.state);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(this.state.stocks); // var loginButton = <Button onClick={this.routeChange} className= \"Button\" id = \"Home\" >Home </Button>;\n\n      return /*#__PURE__*/_jsxDEV(DrawerContainer, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panels\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"panel-info\",\n            children: /*#__PURE__*/_jsxDEV(SearchBar, {\n              stocks: this.state.stocks,\n              email: this.state.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"panel-allocation\",\n            children: /*#__PURE__*/_jsxDEV(AllocationPanel, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"panel-balance\",\n            children: /*#__PURE__*/_jsxDEV(PerformancePanel, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"panel-positions\",\n            children: /*#__PURE__*/_jsxDEV(WatchList, {\n              stocks: this.state.stocks\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this);\n    }\n  }]);\n\n  return Profile;\n}(Component);\n\nexport default _c = withRouter(Profile);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/samehrlich/Desktop/final-app/client/src/profile.js"],"names":["React","Component","ChildComponent","ListGroup","Button","DropdownMenu","Dropdown","withRouter","DrawerContainer","SearchBar","WatchList","AllocationPanel","PerformancePanel","Profile","props","routeChange","bind","location","state","history","push","email","stocks","stock_to_watch","dropdownOpen","value","prevProps","prevState","getStocks","undefined","console","log","getUserStocks","user","url","req","Request","method","headers","body","JSON","stringify","fetch","then","res","json","catch","error","Promise","reject","stock_results","setState","target","id"],"mappings":"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","sourcesContent":["import React,{Component,ChildComponent} from \"react\";\nimport {ListGroup} from \"react-bootstrap/esm\";\nimport {Button,DropdownMenu,Dropdown} from \"reactstrap/es\";\nimport {withRouter} from \"react-router-dom\";\nimport DrawerContainer from \"./layout/DrawerContainer\";\n\nimport \"./CSS/GlobalCSS.css\";\nimport \"./CSS/App.css\";\n// import './App.scss';\nimport SearchBar from './components/searchbar'\nimport WatchList from './components/WatchList'\nimport AllocationPanel from \"./panels/AllocationPanel\";\nimport PerformancePanel from \"./panels/PerformancePanel\";\n// import 'react-dropdown/style.css';\n// import \"./CSS/legacyStyles.css\";\n\n// import { render } from \"react-dom\";\n\nclass Profile extends Component { \n    \n    constructor(props){\n        super(props);\n        \n        \n        this.routeChange = this.routeChange.bind(this);\n        \n             \n        if(this.props.location.state == null || this.props.location.state[0] == null || this.props.location.state[0][0] == null || this.props.location.state[1] == null){\n            this.props.history.push(\"/error\");\n            }\n        else{\n            this.state={  \n                email: this.props.location.state[0][0].email ,\n                stocks: this.props.location.state[1],\n                stock_to_watch:\"\",\n                dropdownOpen: false,\n                value:\"Your Watchlist\"\n                \n            };\n        }\n           \n        \n    }\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.location.state[0][0].getStocks ===undefined && this.props.location.state[0][0].getStocks ===true) {\n          console.log('User has added a stock. Get new stocks')\n          this.getUserStocks()\n          \n        }\n      }\n\n      getUserStocks(){\n  \n        var user={ \n            email: this.state.email,\n        }\n        console.log(user);\n        var url = \"/api/getUserStocks\";\n        const req = new Request(url,{\n            method:\"POST\",\n            headers:{\"Content-Type\":\"application/json\"},\n            body:JSON.stringify(user),\n        });\n        fetch(req)\n        .then((res)=>{\n           \n            return res.json();\n        }).catch((error)=>{\n            console.log(\"p/121\");\n            console.log(error);\n            return Promise.reject(error);\n            })\n        .then(stock_results => {\n            console.log(\"3rdt ADD/remove Stock Rerender\");\n            this.setState({stocks:stock_results},()=> this.props.history.push(\"/profile\",[[{email:this.state.email},this.state.stocks]]))});\n        \n      }\n    \n \n    \n    \n\n\nrouteChange(value){\n    if (value.target.id==\"Back\"){\n        this.props.history.push(\"/\",this.props.history.location.state);\n    }\n    else if(value.target.id==\"Home\"){\n        this.props.history.push(\"/\",this.props.history.location.state);\n    }\n}\n\n\n\n\n\nrender(){\n    console.log(this.state.stocks)\n    // var loginButton = <Button onClick={this.routeChange} className= \"Button\" id = \"Home\" >Home </Button>;\n    return(\n        \n        <DrawerContainer>\n            {/* <div className=\"App-header\"> */}\n            <div className=\"panels\">\n                <div className=\"panel-info\">\n                <SearchBar stocks= {this.state.stocks} email= {this.state.email} /> \n                </div>\n                <div className=\"panel-allocation\">\n                    <AllocationPanel/>\n                </div>\n                <div className=\"panel-balance\">\n                    <PerformancePanel/>\n                </div>\n                <div className=\"panel-positions\">\n                <WatchList stocks={this.state.stocks}/>\n                </div>\n        </div>\n            {/* </div> */}\n            \n   </DrawerContainer>\n    )\n    }\n\n\n}\nexport default withRouter(Profile);"]},"metadata":{},"sourceType":"module"}