{"ast":null,"code":"import _slicedToArray from \"/Users/samehrlich/Desktop/final-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/samehrlich/Desktop/final-app/client/src/panels/UserAlert.tsx\",\n    _s = $RefreshSig$();\n\nimport { PanelBar, PanelBarItem } from \"@progress/kendo-react-layout\";\nimport React from \"react\";\nimport { Grid, GridColumn } from \"@progress/kendo-react-grid\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar columns = [{\n  field: \"Identifier\",\n  header: \"ID\",\n  width: \"100px\"\n}, {\n  field: \"movement\",\n  header: \"Tracking\",\n  width: \"300px\"\n}, {\n  field: \"valuechange\",\n  header: \"Change\",\n  width: \"300px\"\n}];\n\nfunction getAlertData(email, callback) {\n  var user = {\n    email: email,\n    request: \"getData\"\n  };\n  var url = \"/api/UserAlerts\";\n  var req = new Request(url, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(user)\n  });\n  fetch(req).then(function (res) {\n    //Catch server error\n    //no error\n    return res.json();\n  }).catch(function (error) {\n    console.log(error);\n    return Promise.reject(error);\n  }).then(function (query_result) {\n    console.log(query_result);\n    callback(query_result);\n  });\n}\n\nexport default function Useralerts(props) {\n  _s();\n\n  var _this = this;\n\n  function changeprefix(props) {\n    var Value = props.dataItem[props.field || \"\"];\n    var check = props.dataItem['Identifier'];\n\n    var removeButton = /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"btn btn-danger btn-circle btn-sm\",\n      onClick: function onClick(e) {\n        return removeAlert(e, props.dataItem);\n      },\n      children: \"X\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 30\n    }, this);\n\n    if (check == \"Percent\") {\n      return /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [\"%\" + Value, \"   \", removeButton]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [\"$\" + Value, \"   \", removeButton]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n  function removeAlert(event, data) {\n    var user = {\n      email: props.email,\n      symbol: data.symbol,\n      identifier: data.Identifier,\n      movement: data.movement\n    };\n    console.log(user, data);\n    var url = \"/api/RemoveAlerts\";\n    var req = new Request(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(user)\n    });\n    fetch(req).then(function (res) {\n      //Catch server error\n      //no error\n      return res.json();\n    }).catch(function (error) {\n      console.log(error);\n      return Promise.reject(error);\n    }).then(function (query_result) {\n      console.log(query_result);\n      setState({\n        removedAlert: !state.removedAlert\n      });\n    });\n  }\n\n  var _React$useState = React.useState({\n    removedAlert: false\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      state = _React$useState2[0],\n      setState = _React$useState2[1];\n\n  var _React$useState3 = React.useState(),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      AlertData = _React$useState4[0],\n      setAlertData = _React$useState4[1];\n\n  React.useEffect(function () {\n    getAlertData(props.email, setAlertData);\n  }, [props.alertChange]);\n\n  if (JSON.stringify(AlertData) !== JSON.stringify(\"No Alerts found\")) {\n    //get the unique symbols, then get Alert type\n    if (AlertData) {\n      var Stock_Alerts = AlertData.uniqueSymbols.map(function (symbol) {\n        console.log(symbol.symbol); //alert data for the unique stock\n\n        var uniqueAlertData = {\n          Symbol: symbol,\n          alerts: AlertData.alerts.filter(function (i, n) {\n            return i.symbol === symbol.symbol;\n          })\n        };\n        return uniqueAlertData;\n      });\n      return /*#__PURE__*/_jsxDEV(PanelBar, {\n        children: Stock_Alerts.map(function (Alert) {\n          return /*#__PURE__*/_jsxDEV(PanelBarItem, {\n            expanded: false,\n            title: Alert.Symbol.symbol,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              data: Alert.alerts,\n              style: {\n                top: '0px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(GridColumn, {\n                title: \"$ %\",\n                field: \"Identifier\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 37\n              }, _this), /*#__PURE__*/_jsxDEV(GridColumn, {\n                title: \"Watch\",\n                field: \"movement\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 37\n              }, _this), /*#__PURE__*/_jsxDEV(GridColumn, {\n                title: \"Value\",\n                field: \"valuechange\",\n                cell: changeprefix\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 37\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 33\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 28\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"td\", {\n        children: \"there was an error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 16\n      }, this);\n    } // var rendItem = Stock_Alerts.forEach((Alert,n)=>{\n    //     console.log(Alert);\n    //     return(<PanelBarItem expanded={false} title={Alert.Symbol} >\n    //          <MultiColumnComboBox\n    //             data={Alert.alerts}\n    //             columns={columns}\n    //             />   \n    //     </PanelBarItem>)\n    // })\n    // Object.values(Stock_Alerts).map((element: any) =>{\n    //     console.log(element);\n    // })\n    //************Too DOO handle the uniqueAlertData to display it has a panel with the stock symbol and then a bulti combo box as the drop down  */\n\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"td\", {\n      children: \"Add Some Alerts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 18\n    }, this);\n  }\n}\n\n_s(Useralerts, \"5I/mDeK9PU9Yi1migPTSJSAw8AY=\");\n\n_c = Useralerts;\n\nvar _c;\n\n$RefreshReg$(_c, \"Useralerts\");","map":{"version":3,"sources":["/Users/samehrlich/Desktop/final-app/client/src/panels/UserAlert.tsx"],"names":["PanelBar","PanelBarItem","React","Grid","GridColumn","columns","field","header","width","getAlertData","email","callback","user","request","url","req","Request","method","headers","body","JSON","stringify","fetch","then","res","json","catch","error","console","log","Promise","reject","query_result","Useralerts","props","changeprefix","Value","dataItem","check","removeButton","e","removeAlert","event","data","symbol","identifier","Identifier","movement","setState","removedAlert","state","useState","AlertData","setAlertData","useEffect","alertChange","Stock_Alerts","uniqueSymbols","map","uniqueAlertData","Symbol","alerts","filter","i","n","Alert","top"],"mappings":"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","sourcesContent":["\nimport { PanelBar, PanelBarItem } from \"@progress/kendo-react-layout\";\nimport React from \"react\";\nimport { MultiColumnComboBox } from \"@progress/kendo-react-dropdowns\";\nimport { Alerts } from \"../data/models\";\nimport { Grid, GridCellProps, GridColumn } from \"@progress/kendo-react-grid\";\n\nconst columns = [\n    {\n      field: \"Identifier\",\n      header: \"ID\",\n      width: \"100px\",\n    },\n    {\n      field: \"movement\",\n      header: \"Tracking\",\n      width: \"300px\",\n    },\n    {\n      field: \"valuechange\",\n      header: \"Change\",\n      width: \"300px\",\n    },\n  ];\n\nfunction getAlertData(email:string,callback:(arg0: Alerts) => void){\n    var user = {\n        email:email,\n        request:\"getData\"\n    }\n    var url=\"/api/UserAlerts\";\n            const req = new Request(url,{\n                method:\"POST\",\n                headers:{\"Content-Type\":\"application/json\"},\n                body:JSON.stringify(user),\n            });\n            \n            fetch(req)\n            .then((res)=>{\n                //Catch server error\n                    //no error\n                    \n                return res.json();\n            }).catch((error)=>{\n                console.log(error);\n                return Promise.reject(error);\n            })\n            .then(query_result=>{\n                console.log(query_result);\n                callback(query_result)\n            }) \n    \n}\nexport default function Useralerts(props:any) {\n    function changeprefix(props: any){\n        const Value = props.dataItem[props.field || \"\"];\n        const check=props.dataItem['Identifier']\n        const removeButton = <button type=\"button\" className=\"btn btn-danger btn-circle btn-sm\" onClick={(e) =>removeAlert(e,props.dataItem)}>X</button>\n        if(check == \"Percent\"){\n            return (\n                <td >\n                  {\"%\"+Value}   {removeButton}\n                </td>\n              )\n        }\n        else{\n            return (\n                <td >\n                  {\"$\"+Value}   {removeButton}\n                </td>\n              )\n        }\n        \n    }\n    function removeAlert(event:any,data:any){\n        var user={\n            email:props.email,\n            symbol:data.symbol,\n            identifier:data.Identifier,\n            movement:data.movement\n        }\n        console.log(user,data)\n        var url=\"/api/RemoveAlerts\";\n            const req = new Request(url,{\n                method:\"POST\",\n                headers:{\"Content-Type\":\"application/json\"},\n                body:JSON.stringify(user),\n            });\n            \n            fetch(req)\n            .then((res)=>{\n                //Catch server error\n                    //no error\n                    \n                return res.json();\n            }).catch((error)=>{\n                console.log(error);\n                return Promise.reject(error);\n            })\n            .then(query_result=>{\n                console.log(query_result);\n                \n               setState({removedAlert:!state.removedAlert})\n            }) \n    }\n    const [state,setState]= React.useState({ \n        \n        removedAlert:false\n    })\n    const [AlertData, setAlertData] = React.useState<(Alerts)>();\n    React.useEffect(() => {\n      getAlertData(props.email,setAlertData)\n    }, [props.alertChange]);\n    if(JSON.stringify(AlertData)!==JSON.stringify(\"No Alerts found\")){ \n        //get the unique symbols, then get Alert type\n      \n       if(AlertData){ \n        var Stock_Alerts = AlertData.uniqueSymbols.map(symbol => {\n            console.log((symbol.symbol))\n            //alert data for the unique stock\n            var uniqueAlertData={Symbol:symbol,alerts:AlertData.alerts.filter((i,n)=>i.symbol===(symbol).symbol)};\n            \n            return uniqueAlertData;\n        })\n        return (\n            <PanelBar>\n                {Stock_Alerts.map(Alert=>{\n                    return(<PanelBarItem expanded={false} title={Alert.Symbol.symbol} >\n                                <Grid\n                                data={Alert.alerts}\n                                style={{top: '0px'}}\n                                 > \n                                    <GridColumn title=\"$ %\" field=\"Identifier\" />\n                                    <GridColumn title=\"Watch\" field=\"movement\" />\n                                    <GridColumn title=\"Value\" field=\"valuechange\" cell={changeprefix} />\n                                </Grid>\n                   </PanelBarItem>)\n                    \n                })}\n            </PanelBar>)\n       }else{\n           return(\n               <td>there was an error</td>\n          )\n       }\n        \n        \n        // var rendItem = Stock_Alerts.forEach((Alert,n)=>{\n        //     console.log(Alert);\n        //     return(<PanelBarItem expanded={false} title={Alert.Symbol} >\n\n        //          <MultiColumnComboBox\n        //             data={Alert.alerts}\n        //             columns={columns}\n        //             />   \n        //     </PanelBarItem>)\n        // })\n        // Object.values(Stock_Alerts).map((element: any) =>{\n        //     console.log(element);\n        // })\n        \n        //************Too DOO handle the uniqueAlertData to display it has a panel with the stock symbol and then a bulti combo box as the drop down  */\n        \n    }\n    else {\n        return (\n            \n                 <td>Add Some Alerts</td>\n           \n           \n        )\n    }\n\n\n    \n    \n}"]},"metadata":{},"sourceType":"module"}